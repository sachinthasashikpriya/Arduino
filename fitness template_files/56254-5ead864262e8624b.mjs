"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[56254],{551587:(e,i,t)=>{t.d(i,{Z:()=>o});let o=e=>e.startsWith("enabled")||e.startsWith("employee")},910711:(e,i,t)=>{t.d(i,{Z:()=>d});var o=t(667294),n=t(883119),l=t(406893),s=t(749886),a=t(771981),r=t(785893);function d({playing:e,zIndexValue:i}){return(0,r.jsxs)(o.Fragment,{children:[(0,r.jsx)(l.Z,{unsafeCSS:"#story-pin-closeup-pause-play-overlay svg { filter: drop-shadow( 0px 0px 8px rgba(0,0,0,0.1));}"}),(0,r.jsx)(n.xu,{alignItems:"center",bottom:!0,dangerouslySetInlineStyle:{__style:{pointerEvents:"none"}},"data-test-id":"story-pin-closeup-pause-play-overlay",display:"flex",id:"story-pin-closeup-pause-play-overlay",justifyContent:"center",left:!0,opacity:.8,position:"absolute",right:!0,rounding:s.yR,top:!0,zIndex:i?new n.Ry(i):a.lt,children:!e&&(0,r.jsx)(n.JO,{accessibilityLabel:"Play",color:"light",icon:"play",size:48})})]})}},983435:(e,i,t)=>{t.d(i,{Z:()=>x});var o=t(667294),n=t(883119),l=t(140017),s=t(558273),a=t(340523),r=t(551587),d=t(5859),u=t(797456),c=t(749886),_=t(214164),p=t(217058),h=t(623409),g=t(554786),y=t(115557),b=t(369708),m=t(785893);let v=({accessibilityLabel:e,dataTestId:i,disable:t,handleTap:o,icon:l})=>(0,m.jsx)(n.xu,{"data-test-id":i,opacity:t?.5:void 0,children:(0,m.jsx)(n.iP,{disabled:t,onTap:o,children:(0,m.jsx)(n.JO,{accessibilityLabel:e,color:"light",icon:l,size:16})})});function x({activePageIndex:e,handlePanelChange:i,handlePlay:t,handlePause:x,handlePausePlay:f,handleMute:P,handleVideoScrubbingNewPage:w,handleWatchAgain:S,isPlaying:I,isMuted:j,isPanelOpen:A,pages:z,pageCount:L,pinId:C="",progressInfo:E,showEndCard:M,showVideoControls:T=!1,viewParameter:V,isStoryPin:k=!0,captionsUrl:D="",captionsExpGroup:H=""}){let $=(0,l.ZP)(),{currentTime:O}=E||{},{seekTimes:Z}=(0,_.Hx)(),B=(0,d.B)(),R=(0,b.rG)(),{checkExperiment:F}=(0,a.F)(),J=(0,g.HG)(),{isAuthenticated:W}=B,{captionsEnabled:G,setCaptionsEnabled:N}=R,U=(0,h.Z)(),X=z[e],{should_mute:K}=X||j,Y=Object.keys(Z).includes(C)&&Z[C]?Z[C]:O,q=(0,o.useMemo)(()=>z.map(e=>{let i=e.blocks?.find(e=>3===e.block_type),t=i?.video?.video_list?.V_HLSV3_MOBILE?.duration||i?.video?.video_list?.V_720P?.duration;return t?{duration:t,isVideo:!0}:{duration:s.oN,isVideo:!1}}),[z]),Q=[{duration:E?.duration||0,isVideo:!0}],ee=k?q:Q,ei=(X&&X.blocks?.[0]||{}).video?.video_list?.V_HLSV3_MOBILE?.captions_urls,et=!1;(ei&&0!==Object.keys(ei).length||D)&&(et=!0);let eo=k&&et&&J?F(W?"auth_desktop_video_pin_captions":"unauth_desktop_video_pin_captions").group:"",en=H||eo,el=(0,r.Z)(en),es=el&&F(W?"auth_default_captions_on":"unauth_default_captions_on").anyEnabled;es&&N(!0);let ea=(0,o.useMemo)(()=>ee.reduce((e,i)=>e+(i.duration||0),0)/(k?y.gJ:1),[ee,k]),er=(0,o.useMemo)(()=>ee.filter((i,t)=>t<e).reduce((e,i)=>e+(i.duration||0),0)/y.gJ,[ee,e]),ed=ee.length>0&&ee[e].isVideo?Y+er:5*O+er,eu=$._('Hide captions', 'gestalt.video.accessibilityHideCaptionsLabel', 'ARIA label for hide captions button'),ec=$._('Show captions', 'gestalt.video.accessibilityShowCaptionsLabel', 'ARIA label for show captions button');return(0,m.jsxs)(n.xu,{alignContent:"evenly",alignItems:"baseline",dangerouslySetInlineStyle:{__style:{gap:"18.5px",pointerEvents:"auto"}},direction:"column",display:"flex",justifyContent:"between",width:"100%",children:[(0,m.jsxs)(n.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{opacity:T||!I?1:0,transition:"all .1s"}},direction:"row",display:"flex",justifyContent:"between",width:"99%",children:[(0,m.jsxs)(n.kC,{alignItems:"center",direction:"row",gap:5,children:[(0,m.jsx)(v,{accessibilityLabel:I?$._('Pause', 'closeup.IdeaPinVideo.Pause', 'Pause button on Idea Pin video'):$._('Play', 'closeup.IdeaPinVideo.Play', 'Play button on Idea Pin video'),dataTestId:`story-pin-closeup-${I?"pause":"play"}`,handleTap:M&&S?S:f,icon:I?"pause":"play"}),E&&(0,m.jsxs)(n.xu,{"data-test-id":"time-display",children:[(0,m.jsx)(n.xv,{align:"end",color:"inverse",inline:!0,overflow:"normal",size:"300",weight:"bold",children:`${(0,c.Lc)(ed)}`})," ",(0,m.jsx)(n.xu,{display:"inlineBlock",opacity:.6,children:(0,m.jsx)(n.xv,{align:"end",color:"inverse",inline:!0,overflow:"normal",size:"300",weight:"bold",children:`/ ${(0,c.Lc)(ea)}`})})]})]}),(0,m.jsxs)(n.kC,{direction:"row",gap:5,children:[(en.startsWith("enabled_captions")||en.startsWith("employees"))&&et&&(0,m.jsx)(v,{accessibilityLabel:G?ec:eu,dataTestId:`closed-captions-button-${G?"disable":"enable"}`,handleTap:()=>{let e=J?"desktop_pin_page":"mweb_pin_page";G?(0,p.My)(`${e}.closed_captions_button.toggle_off`):(0,p.My)(`${e}.closed_captions_button.toggle_on`),U({action:"click",item:"closed-captions-button"}),R.setCaptionsEnabled(!G)},icon:G?"captions":"captions-outline"}),(0,m.jsx)(v,{accessibilityLabel:j?$._('Unmute', 'closeup.IdeaPinVideo.unmute', 'Unmute button on Idea Pin video'):$._('Mute', 'closeup.IdeaPinVideo.mute', 'Mute button on Idea Pin video'),dataTestId:`story-pin-closeup-${j?"unmute":"mute"}`,disable:K,handleTap:P,icon:j?"mute":"sound"}),(0,m.jsx)(v,{accessibilityLabel:A?$._('Maximize', 'closeup.IdeaPinVideo.maximize', 'Maximize button on Idea Pin video'):$._('Minimize', 'closeup.IdeaPinVideo.minimize', 'Minimize button on Idea Pin video'),dataTestId:`story-pin-closeup-${A?"maximize":"minimize"}`,handleTap:i,icon:A?"maximize":"minimize"})]})]}),(0,m.jsx)(u.ZP,{activePageCurrentTime:Y,activePageIndex:e,currentTime:ed,duration:ea,handlePause:x,handlePlay:t,handleVideoScrubbingNewPage:w,isPlaying:I,pageCount:L,pageDurations:ee,pinId:C,progressInfo:E,shouldShowPlayhead:!0,showEndCard:M,showVideoControls:T,videoControlsExp:el,videoDurations:ee,viewParameter:V})]})}},797456:(e,i,t)=>{t.d(i,{$E:()=>b,$:()=>m,ZP:()=>P});var o=t(667294),n=t(883119),l=t(587703),s=t(140017),a=t(340523),r=t(5859),d=t(558273),u=t(115557),c=t(785893);function _({activePageCurrentTime:e,pillHeight:i,progressInfo:t,videoDuration:o}){let l=t?.currentTime??0,s=t?.duration??d.P6,a=`${o?.isVideo?Math.floor(1e4*(e||l)/(o.duration/u.gJ))/100:l/s*100}%`;return(0,c.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:b}},height:i,overflow:"hidden",rounding:"pill",children:(0,c.jsx)(n.xu,{color:m,dangerouslySetInlineStyle:{__style:{width:a}},height:"100%",rounding:"pill"})})}var p=t(749886),h=t(214164),g=t(554786),y=t(149722);let b="rgba(255,255,255,0.24)",m="light",v=()=>{},x=({children:e,setHoveringChange:i,handleMouseDown:t,handleMouseLeave:o,handleTouchStart:l,playhead:a,isPlaying:r,showVideoControls:d,videoControlsExp:u})=>{let _=(0,s.ZP)(),p=!(0,g.HG)();return u?(0,c.jsx)(n.iP,{children:(0,c.jsx)(n.xu,{ref:a,alignItems:"center","aria-label":_._('Video scrubber progress bar', 'ideaPin.closeupvideo.videoScrubberLabel', 'Accessibility label for video scrubber progress bar on video idea pins.'),dangerouslySetInlineStyle:{__style:{pointerEvents:"auto",touchAction:"none"}},"data-test-id":"bullet-video-progress-bar",display:"flex",flex:"grow",justifyContent:p?"center":"start",marginBottom:p?0:6,minHeight:"8px",onFocus:i(!0),onMouseDown:t,onMouseLeave:o,onMouseOver:i(!0),onTouchEnd:e=>e.preventDefault(),onTouchStart:l,opacity:u&&(d||!r)?1:0,paddingY:p?6:0,position:"relative",role:"progressbar",width:"100%",children:e})}):(0,c.jsx)(n.xu,{ref:a,alignItems:"center","aria-label":_._('Video scrubber progress bar', 'ideaPin.closeupvideo.videoScrubberLabel', 'Accessibility label for video scrubber progress bar on video idea pins.'),dangerouslySetInlineStyle:{__style:{pointerEvents:"auto",touchAction:"none"}},"data-test-id":"bullet-video-progress-bar",display:"flex",flex:"grow",justifyContent:p?"center":"start",marginBottom:p?0:6,minHeight:"8px",onFocus:i(!0),onMouseDown:t,onMouseLeave:o,onMouseOver:i(!0),onTouchEnd:e=>e.preventDefault(),onTouchStart:l,paddingY:p?6:0,position:"relative",role:"progressbar",width:"100%",children:e})},f=({currentTime:e=0,inRemoveRelatedStreamsExp:i,isMobile:t,isRTL:o,isSeeking:l,scrubberWidth:s,videoControlsExp:a})=>(0,c.jsxs)(n.xu,{dangerouslySetInlineStyle:{__style:o?{right:s}:{left:s}},"data-test-id":"video-progress-bar",position:"relative",children:[t&&l&&!i&&(0,c.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{top:"-32px"}},marginStart:-3,position:"absolute",children:(0,c.jsx)(n.xv,{color:"light",size:"100",children:(0,p.Lc)(e)})}),(0,c.jsx)(n.xu,{color:m,height:4,position:"absolute",rounding:"pill",children:(0,c.jsx)(n.xu,{color:"light",dangerouslySetInlineStyle:{__style:{marginTop:l&&a?-8:-6}},height:l&&a?16:12,marginStart:-2,rounding:"circle",width:l&&a?16:12})})]});function P({activePageIndex:e,activePageCurrentTime:i,pageCount:t,progressInfo:s,showEndCard:d,duration:u=0,currentTime:p=0,pageDurations:b=[],handlePlay:P=v,handlePause:w=v,handleVideoScrubbingNewPage:S=v,videoDurations:I=[],viewParameter:j,isInactiveStreamPin:A=!1,isPlaying:z=!1,setVideoProgress:L,shouldShowPlayhead:C=!1,showVideoControls:E=!0,pinId:M="",videoControlsExp:T=!1}){let V=!(0,g.HG)(),k=(0,o.useRef)(null),{checkExperiment:D}=(0,a.F)(),{isRTL:H}=(0,r.B)(),[$,O]=(0,o.useState)(!1),[Z,B]=(0,o.useState)(z),[R,F]=(0,o.useState)(),J=(0,l.Z)(),{isSeekingIdeaPin:W}=(0,h.Hx)(),{updateSeekTime:G,updateSeekingIdeaPin:N}=(0,h.RC)(),U=(0,y.Z)(),X=U.isAuth,K=(0,o.useCallback)((i,o)=>{if(!A&&o<=t){if(o!==e&&S(o),L){let{isVideo:e}=I[o];L({currentTime:i/1e3,duration:e?s?.duration??1:5,pinId:M})}G(i/1e3,M)}J({event_type:101,view_type:3,view_parameter:j,component:14302})},[e,S,A,J,t,M,s?.duration,L,G,I,j]),Y=`${p/u*100}%`,q=b.map(e=>`${(e.duration||0)/u/10}%`),Q=(0,o.useMemo)(()=>{let e=0;return b.map(({duration:i})=>{let t=i+e,o={min:e,max:t};return e=t,o})},[b]),ee=V&&D(X?"closeup_auth_mweb_remove_streams":"closeup_unauth_mweb_remove_streams").anyEnabled,ei=$?"0 1.2px":"0 1px",et=e=>()=>O(e),eo=(0,o.useCallback)(e=>{if(k.current){let{left:i=0,right:t=0,width:o=0}=k.current.getBoundingClientRect(),n=H?Math.max(0,Math.min((t-e)/o,1)):Math.max(0,Math.min((e-i)/o,1)),l=n*u*1e3,s=Q.findIndex(e=>l>=e.min&&l<=e.max),a=-1===s?0:s;K(l-Q[a].min,a)}},[u,K,Q,H]),en=()=>{W||(B(z||d),N(!0))},el=(0,o.useCallback)(e=>{W&&eo(e.pageX)},[eo,W]),es=(0,o.useCallback)(e=>{if(W){e.preventDefault();let i=Array.from(e.changedTouches).find(e=>e.identifier===R);i&&eo(i.pageX)}},[W,eo,R]),ea=(0,o.useCallback)(()=>{N(!1),et(!1),F(void 0),Z&&P()},[N,P,Z]),er=(0,o.useCallback)(e=>{let i=Array.from(e.changedTouches).find(e=>e.identifier===R);i&&(N(!1),et(!1),F(void 0)),Z&&P()},[P,Z,R,N]);(0,o.useEffect)(()=>(W&&!A&&(window.addEventListener("mousemove",el),window.addEventListener("mouseup",ea),window.addEventListener("touchmove",es),window.addEventListener("touchend",er)),()=>{window.removeEventListener("mousemove",el),window.removeEventListener("mouseup",ea),window.removeEventListener("touchmove",es),window.removeEventListener("touchend",er)}),[el,ea,er,es,A,W,eo,R]);let ed=t=>t<e||d?(0,c.jsx)(n.xu,{color:m,height:4,rounding:"pill"}):e===t&&s?(0,c.jsx)(_,{activePageCurrentTime:i,pillHeight:4,progressInfo:s,videoDuration:I[t]}):(0,c.jsx)(n.xu,{color:m,dangerouslySetInlineStyle:{__style:{opacity:.24}},height:4,rounding:"pill"});return(0,c.jsxs)(x,{handleMouseDown:e=>{en(),z&&w(),eo(e.pageX)},handleMouseLeave:()=>{et(!1)},handleTouchStart:e=>{en(),et(!0);let i=e.changedTouches[0];F(i.identifier),z&&w(),eo(i.pageX)},isPlaying:z,playhead:k,setHoveringChange:et,showVideoControls:E,videoControlsExp:T,children:[C&&(E&&T||$||W||V)&&(0,c.jsx)(f,{currentTime:i,inRemoveRelatedStreamsExp:ee,isMobile:V,isRTL:H,isSeeking:W,scrubberWidth:Y,videoControlsExp:T}),Array(t).fill().map((e,i)=>(0,c.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{margin:ei}},flex:"grow",width:q.length===t?q[i]:"auto",children:(0,c.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{transition:"all .1s"}},"data-test-id":"idea-pin-video-progress-bar",rounding:"pill",children:ed(i)})},`${M}-${i}`))]})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/56254-5ead864262e8624b.mjs.map