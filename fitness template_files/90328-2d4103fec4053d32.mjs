"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[90328],{795912:(e,t,n)=>{n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StoryPinBlock_pin",selections:[{args:null,kind:"FragmentSpread",name:"StoryPinStickerBlockCloseup_pin"}],type:"Pin",abstractKey:null};i.hash="8bb1bb1f7bafeed0fe43bed44ef12d2a";let a=i},381954:(e,t,n)=>{n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StoryPinStickerBlockCloseup_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'images(spec:"236x")'},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,concreteType:"OfferSummary",kind:"LinkedField",name:"offerSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"price",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"maxPrice",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};i.hash="7e8d917850c8329247291df0d281a59b";let a=i},907932:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(667294),a=n(883119),s=n(923368),o=n(785893);function r({accessibilityLabel:e,handleClick:t,icon:n,iconColor:r,iconOnly:l,testId:d,buttonText:c,tabIndex:p,bgColor:u,isActive:h}){let[m,_]=(0,i.useState)(!1),y=(0,i.useRef)(null),{setAbortNoActionPlacementTimeout:g}=(0,s.x4)(),f=()=>{_(e=>!e),t(),g(!0)},b=e=>{y&&e.target instanceof Element&&!y.current?.contains(e.target)&&_(!1)};return(0,i.useEffect)(()=>(window.addEventListener("mousedown",b),()=>{window.removeEventListener("mousedown",b)}),[]),(0,i.useEffect)(()=>{void 0!==h&&_(h)},[h]),(0,o.jsx)(a.xu,{"data-test-id":d||"closeup-action-bar-button",children:(0,o.jsxs)(a.kC,{alignItems:"center",justifyContent:"start",children:[(0,o.jsx)(a.hU,{ref:y,accessibilityLabel:e,bgColor:u,icon:n,iconColor:r||"darkGray",onClick:f,selected:m,size:l?"md":"lg",tabIndex:p}),c&&(0,o.jsx)(a.iP,{onTap:f,rounding:2,children:(0,o.jsx)(a.X6,{color:"light",overflow:"normal",size:"400",children:c})})]})})}},836910:(e,t,n)=>{n.d(t,{Z:()=>u});var i=n(667294),a=n(883119),s=n(12163),o=n(214877),r=n(140017),l=n(158838),d=n(923368),c=n(785893);class p extends i.PureComponent{constructor(...e){var t,n,i;super(...e),t="startAudiblePlayTime",n=this.props.muted?null:new Date,(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in this?Object.defineProperty(this,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[t]=n}componentDidUpdate(e){e.muted!==this.props.muted&&(this.startAudiblePlayTime=this.props.muted?null:new Date)}componentWillUnmount(){let{musicRecordingId:e,muted:t,pinId:n,video:i}=this.props;if(e&&!t&&this.startAudiblePlayTime){let t=Date.now()-this.startAudiblePlayTime.getTime();if(t>=2e3){let{hlsv3:t,mp4:a}=(0,l.ZP)({vEXP3:i.video_list?.V_EXP3,vEXP4:i.video_list?.V_EXP4,vEXP5:i.video_list?.V_EXP5,vEXP6:i.video_list?.V_EXP6,vEXP7:i.video_list?.V_EXP7,v720P:i.video_list?.V_720P,vHLSV3MOBILE:i.video_list?.V_HLSV3_MOBILE})||{},s=(a||t)?.duration||0;this.props.logContextEvent({event_type:8999,object_id_str:e,aux_data:{pin_id:n,story_pin_music_duration:s}})}}}render(){let{activePageIndex:e,blockHeight:t,blockWidth:n,closeupStoryPinViewability:i,customEndCard:o,isPlaying:r,muted:d,onEnded:p,onUpdateVideoInfo:u,pageIndex:h,pinId:m,roundCorners:_=!0,stackedCloseupEnabled:y,video:g,videoThumbnailStartTime:f}=this.props,{hlsv3:b,mp4:x}=(0,l.ZP)({vEXP3:g.video_list?.V_EXP3,vEXP4:g.video_list?.V_EXP4,vEXP5:g.video_list?.V_EXP5,vEXP6:g.video_list?.V_EXP6,vEXP7:g.video_list?.V_EXP7,v720P:g.video_list?.V_720P,vHLSV3MOBILE:g.video_list?.V_HLSV3_MOBILE})??{},v=x||b;if(!v)return null;let{height:P,thumbnail:w,width:S}=v,C=(S??1)/(P??1),j={height:"100%",left:"0",top:"0",width:"100%"},A=n/t;if(Math.abs(A-C)>.01){if(A<C){let e=100*C/A;j.width=`${e}%`,j.left=`-${(e-100)/2}%`}else if(A>C){let e=100*A/C;j.height=`${e}%`,j.top=`-${(e-100)/2}%`}}let k="number"==typeof e&&h<=e+3;return(0,c.jsx)(a.xu,{height:t,overflow:"hidden",position:"relative",width:n,children:(0,c.jsx)(a.xu,{height:"100%",position:"absolute",width:"100%",children:k||r||f?(0,c.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:j},position:"absolute",children:(0,c.jsx)(s.Z,{autoplay:r,closeupStoryPinViewability:i,contextLogData:{component:0===h?227:228,element:10957,objectId:m,story_pin_page_id:h,view:3,viewParameter:157},customEndCard:o,customThumbnail:w,isPromoted:!1,loop:!1,muted:d,objectFit:x?"cover":void 0,onEnded:()=>{p&&p(h)},onTimeChange:({time:e})=>{if(u&&"number"==typeof v.duration&&v.duration>0){let t=v.duration/1e3;u({currentTime:e,duration:t})}},pinId:m,preferMp4:!!x,roundingOverride:_?null:0,showControls:y?"hover":"never",variant:"storyPin",video:{id:g.id,hlsv3:b,mp4:x},videoThumbnailStartTime:f})}):(0,c.jsx)(a.Ee,{alt:this.props.i18n._('Video cover image', 'closeup.storyPin.videoCover', 'cover image displayed for a video'),fit:"cover",naturalHeight:P??1,naturalWidth:S??1,src:w??""})})})}}function u(e){let{logContextEvent:t}=(0,o.v)(),n=(0,r.ZP)(),{stackedCloseupEnabled:i}=(0,d.x4)();return(0,c.jsx)(p,{...e,i18n:n,logContextEvent:t,stackedCloseupEnabled:i})}},990328:(e,t,n)=>{n.d(t,{_B:()=>D,Xw:()=>U,tD:()=>H,ZP:()=>G}),n(167912);var i,a,s=n(883119),o=n(616550),r=n(214877),l=n(757640),d=n(771981),c=n(785893);let p=({block:{block_style:{height:e=0,width:t=0,x_coord:n=0,y_coord:i=0,rotation:a=0}={},original_comment_id:p},pageAspectRatio:u,scaleFactor:h})=>{let{logContextEvent:m}=(0,r.v)(),_=D/u,y=(0,o.k6)(),{data:g}=(0,l.Z)({name:"AggregatedCommentResource",options:{commentId:p,field_set_key:"comment_reply_sticker"}});return(0,c.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{left:n*D*h/100,top:i*_*h/100,transform:`rotate(${a}deg)`}},display:"flex",height:e*_*h/100,margin:-1,padding:1,position:"absolute",rounding:2,width:t*D*h/100,zIndex:d.B5,children:(0,c.jsx)(s.iP,{onTap:()=>{m({event_type:102,view_type:1,component:227,element:12541,aux_data:{comment_id:p}}),g?.pin_id&&y.push(`/pin/${g.pin_id}/comments/${p||""}`)},rounding:"pill"})})};var u=n(448318),h=n(590107);function m({src:e,fallbackSrc:t,...n}){let i=(0,h.Z)(e);return(0,c.jsx)(u.Z,{...n,src:i?e:t})}var _=n(702664);function y({isUseCache:e,signature:t}){return(0,_.useSelector)(({pinbuilder:n})=>{let{storyPinItemBlocks:i}=n;if(!e)return null;for(let e of Object.keys(i))if(i[e].media?.signatureEdited===t||i[e].media?.signature===t)return i[e];return null})}var g=n(667294),f=n(161881),b=n(406718),x=n(930837),v=n(140017),P=n(413110);let w=({aggregatedCommentId:e,onDismiss:t})=>{let n=(0,v.ZP)(),i=(0,b.Z)(),a=(0,f.Z)(),[o,r]=(0,g.useState)(""),l=(0,c.jsx)(s.kC,{justifyContent:"end",children:(0,c.jsx)(s.zx,{color:"red",disabled:!o,onClick:()=>{(async()=>{await a({fromUnifiedComment:!0,objectType:P.o.aggregatedComment,objectId:e,tags:"[]",text:o})})(),t()},text:n._('Post', 'ideapin.questionsticker.replymodal.postbutton', 'Post reply to creator Q&A question')})});return(0,c.jsx)(x.ZP,{accessibilityModalLabel:"reply to creator Q and A question",align:"start",footer:l,heading:n._('Reply', 'ideapin.questionsticker.replymodal', 'Reply to creator Q&A question'),onDismiss:t,children:(0,c.jsx)(s.xu,{paddingX:8,paddingY:1,children:(0,c.jsx)(s.Kx,{id:"ideaPinQuestionStickerReplyModalTextArea",onChange:({value:e})=>{r(e)},placeholder:i?n._('Your reply will show up as a public comment on this Pin.', 'pin.questionsticker.replymodal.placeholder', 'Placeholder for creator Q&A reply textarea'):n._('Your reply will show up as a public comment on this Idea Pin.', 'ideapin.questionsticker.replymodal.placeholder', 'Placeholder for creator Q&A reply textarea'),value:o})})})};var S=n(205841),C=n(207012),j=n(339001),A=n(340523),k=n(749886),T=n(520718);let I=void 0!==i?i:i=n(381954);function E({block:e,elementType:t,onFlyoutOpen:n,pageAspectRatio:i,pageIndex:a,pinKey:p,scaleFactor:u,tooltipElementType:h,videoPinProgress:m}){let{logContextEvent:_}=(0,r.v)(),[y,f]=(0,g.useState)(!1),[b,x]=(0,g.useState)(!1),P=(0,g.useRef)(null),E=(0,o.k6)(),z=(0,v.ZP)(),R=(0,C.Z)(I,p),{checkExperiment:M}=(0,A.F)(),{block_style:{height:N=0,width:O=0,x_coord:L=0,y_coord:F=0,rotation:Z=0}={},end_time:V,error_message:B,interactive_sticker_type:$=null,is_removed:W,is_valid:K,start_time:X,sticker_data:G,type:q}=e,Y=R?.entityId,{board_id:Q,question_comment_id:J}=G||{},{image_small_url:ee,full_name:et,username:en=""}=e.user??{},ei=null,ea=K&&5===$&&!!Q,es=K&&7===$&&!!J,eo=(0,l.Z)(Q&&ea?{name:"BoardResource",options:{field_set_key:"tagged_board_preview",board_id:Q}}:null),{is_collaborative:er,pin_count:el,url:ed}=eo.data||{};q===k.h8.PRODUCT_STICKER?ei=Y?`/pin/${Y}/`:"/":q===k.h8.MENTION_STICKER?ei=`/${en}/`:ea&&(ei=eo.isLoaded?`${ed}`:null);let ec=D/i,{currentTime:ep}=m||{},eu=!(0,T.Z)({currentTime:ep,endTime:V,startTime:X}),eh=()=>{_({event_type:123,component:228,element:h,view_type:3,view_parameter:157,aux_data:{story_pin_page_id:a}}),f(!1)},em=({event:e})=>{_({event_type:120,component:228,element:h,view_type:3,view_parameter:157,aux_data:{error_message:!K&&B?B:null,story_pin_page_id:a}}),f(!0),n&&(e.stopPropagation(),n())};(0,g.useEffect)(()=>(document.addEventListener("scroll",()=>{f(!1)}),()=>document.removeEventListener("scroll",()=>{f(!1)})),[]);let e_=()=>[5].includes($)?K?eo.isLoaded?(0,c.jsxs)(g.Fragment,{children:[(0,c.jsxs)(s.xu,{flex:"grow",paddingX:2,children:[(0,c.jsx)(s.xv,{lineClamp:1,size:"100",weight:"bold",children:er?z._('Explore this group board', 'closeup.StoryPin.stickerBlock.boardSticker.clickLabel', 'Label explaining click action when group board tag flyout showing'):z._('Explore this board', 'closeup.StoryPin.stickerBlock.boardSticker.clickLabel', 'Label explaining click action when board tag flyout showing')}),(0,c.jsx)(s.xv,{size:"100",children:(!!el||0===el)&&(0,j.nk)(z.ngettext('{{ pinCount }} Pin', '{{ pinCount }} Pins', el, 'closeup.StoryPin.stickerBlock.boardSticker.boardLabel', 'Caption when board tag flyout that showing number of Pins on board'),{pinCount:el})})]}),(0,c.jsx)(s.xu,{flex:"none",children:(0,c.jsx)(s.Sj,{bgColor:"transparent",icon:"arrow-forward",iconColor:"darkGray",size:"xs"})})]}):(0,c.jsxs)(s.xu,{alignItems:"center",direction:"row",display:"flex",flex:"grow",paddingY:2,children:[(0,c.jsx)(s.xu,{marginEnd:1,paddingX:2,children:(0,c.jsx)(s.xv,{color:"subtle",lineClamp:1,size:"100",children:z._('Loading board...', 'closeup.StoryPin.stickerBlock.boardSticker.loadingText', 'Label explaining board sticker still loading')})}),(0,c.jsx)(s.$j,{accessibilityLabel:z._('Board is loading', 'closeup.StoryPin.stickerBlock.boardSticker.loadingSpinnerText', 'Accessibility label for board loading spinner'),show:!0,size:"sm"})]}):(0,c.jsx)(s.xu,{paddingX:2,paddingY:2,children:(0,c.jsx)(s.xv,{color:"subtle",lineClamp:1,size:"200",weight:"bold",children:B})}):(0,c.jsx)(s.xu,{paddingX:2,paddingY:2,children:(0,c.jsx)(s.xv,{color:"subtle",lineClamp:1,size:"200",weight:"bold",children:z._('Sticker not supported yet', 'closeup.StoryPin.stickerBlock.genericStickerError', 'Label explaining this sticker has not been implemented yet')})}),ey=()=>{let e=null;switch(q){case k.h8.PRODUCT_STICKER:let{gridTitle:t,imageSpec_236x:n,richSummary:i,description:a}=R||{},{displayName:o,products:r}=i||{},l=((r||[])[0]||{}).offerSummary||{},{price:d,maxPrice:p}=l||{},u=o||t||a;e=(0,c.jsxs)(g.Fragment,{children:[(0,c.jsx)(s.xu,{flex:"none",children:(0,c.jsx)(s.zd,{height:40,rounding:3,wash:!0,width:40,children:(0,c.jsx)(s.Ee,{alt:"",color:"lightGray",fit:"cover",naturalHeight:1,naturalWidth:1,src:n?.url||""})})}),(0,c.jsx)(s.xu,{flex:"grow",paddingX:2,children:l&&(d||p)?(0,c.jsxs)(s.kC,{alignContent:"center",alignItems:"stretch",direction:"column",flex:"grow",justifyContent:"center",children:[(0,c.jsx)(s.xv,{color:"shopping",lineClamp:1,size:"100",weight:"bold",children:d}),(0,c.jsx)(s.xv,{lineClamp:1,size:"100",children:u})]}):(0,c.jsx)(s.xv,{lineClamp:1,size:"100",children:u})}),(0,c.jsx)(s.xu,{flex:"none",children:(0,c.jsx)(s.Sj,{bgColor:"transparent",icon:"arrow-forward",iconColor:"darkGray",size:"xs"})})]});break;case k.h8.MENTION_STICKER:e=(0,c.jsxs)(g.Fragment,{children:[(0,c.jsx)(s.xu,{flex:"none",children:(0,c.jsx)(S.qE,{name:et??"",size:"sm",src:ee??void 0})}),(0,c.jsx)(s.xu,{flex:"grow",paddingX:2,children:(0,c.jsx)(s.xv,{lineClamp:1,size:"200",weight:"bold",children:et})}),(0,c.jsx)(s.xu,{flex:"none",children:(0,c.jsx)(s.Sj,{bgColor:"transparent",icon:"arrow-forward",iconColor:"darkGray",size:"xs"})})]});break;case k.h8.GENERIC_STICKER:e=e_();break;case k.h8.VTO_MAKEUP_STICKER:e=(0,c.jsx)(s.xv,{size:"300",weight:"bold",children:z._('Try this sticker on your phone!', 'closeup.storyPin.vtoMakeupSticker', 'Caption when @vitural-try-on-makeup tag is tapped for Web')})}return(0,c.jsx)(s.xu,{alignItems:"center","data-test-id":q,display:"flex",justifyContent:"center",padding:q===k.h8.PRODUCT_STICKER?1:3,width:"100%",children:W?(0,c.jsx)(s.xv,{color:"subtle",size:"200",weight:"bold",children:z._('Tag removed!', 'closeup.storyPin.stickerBlock', 'Caption when the tag is removed')}):e})};return(0,c.jsx)(g.Fragment,{children:eu?null:(0,c.jsxs)(s.xu,{ref:P,dangerouslySetInlineStyle:{__style:{left:L*D*u/100,top:F*ec*u/100,transform:`rotate(${Z}deg)`}},"data-test-id":(q||"")+"_container",display:"flex",height:N*ec*u/100+2*U,margin:-1,padding:1,position:"absolute",rounding:2,width:O*D*u/100+2*U,zIndex:d.B5,children:[(0,c.jsx)(s.iP,{disabled:eu,onTap:y?eh:({event:e})=>{!eu&&(_({event_type:101,component:228,element:t,view_type:3,view_parameter:157,aux_data:{story_pin_page_id:a}}),es?M("web_question_sticker_display").anyEnabled&&x(!0):em({event:e}))},rounding:"pill"}),y&&(0,c.jsx)(s.mh,{zIndex:H,children:(0,c.jsx)(s.J2,{_deprecatedShowCaret:!0,anchor:P.current,idealDirection:"up",onDismiss:eh,positionRelativeToAnchor:!1,size:W?"flexible":"sm",children:W?ey():(0,c.jsx)(s.iP,{fullWidth:!0,onTap:({event:e})=>{e.preventDefault(),W||(_({event_type:101,component:228,element:h,object_id_str:Y,view_type:3,view_parameter:157,aux_data:{story_pin_page_id:a}}),ei?E.push(ei):eh())},children:ey()})})}),!!J&&b&&(0,c.jsx)(w,{aggregatedCommentId:J,onDismiss:()=>{x(!1)}})]})})}var z=n(766742),R=n(961936),M=n(626468),N=n(851193);function O({block:e,fontsLoaded:t,pageAspectRatio:n,scaleFactor:i,thumbnail:a}){let{block_style:o,style:r=k.Cc,text:l}=e,{alignment:d,font:p,font_size:u,highlight_color:h,vertical_alignment:m=k.Cc.vertical_alignment}=r,{hex_color:_=k.Cc.hex_color}=r??{},[y,f]=(0,g.useState)(0),[b,x]=(0,g.useState)([]),v=p||k.Cc.font,{name:P,default_size:w,letter_spacing:S,line_height:C}=v,j=(0,N.Z)(v),A=Math.round(100*(o?.width||100))/1e4,T=Math.round(100*(o?.height||100))/1e4,I=Math.round(100*(o?.x_coord||0))/1e4,E=Math.round(100*(o?.y_coord||0))/1e4;(0,g.useEffect)(()=>{if(t){let e=(0,M.KV)({text:l,boxHeight:R.U*T,boxWidth:R.q8*A,font:j,startFontSize:Math.floor(u||w||24)});x(e.lines),f(e.fontSize)}},[t,l]);let O=y*i,L=h?(0,k.pE)(O,C):{x:0,y:0},F=A*R.q8*i+2*L.x,Z=T*R.U*i+2*L.y,V=I*R.q8*i-L.x,B=a?`${100*E}%`:E*(R.q8/n)*i-L.y;return(0,c.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{left:V,top:B}},display:"flex",height:Z,position:"absolute",width:F,children:(0,c.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:(0,z.RK)({alignment:d,verticalAlignment:m})},children:(0,c.jsx)(s.xu,{display:"inlineBlock",maxWidth:"100%",children:(0,c.jsx)("p",{style:(0,z.BN)({fontSize:O,hexColor:_,letterSpacing:S,lineHeight:C,name:P}),children:b.map((e,t)=>(0,c.jsx)("span",{style:(0,z.xm)({fontSize:O,hasText:e.text.length>0,highlightColor:h||null,lineHeight:C}),children:t===b.length-1?e.text:(0,c.jsxs)(g.Fragment,{children:[e.text," ",(0,c.jsx)("br",{})]})},`paragraphLine-${t}-${(l??"").substr(0,9)}`))})})})})}var L=n(836910),F=n(149722);function Z({ownerId:e}){let t=(0,v.ZP)(),n=(0,F.Z)(),i=n.isAuth&&n.id===e;return(0,c.jsxs)(s.xu,{alignItems:"center",color:"tertiary",direction:"column",display:"flex",height:"100%",justifyContent:"center",width:"100%",children:[(0,c.jsx)(s.xv,{color:"inverse",children:i?t._('Your video is processing!', 'closeup.storyPin.videoPlaceholder', 'Let user know that their video is still processing'):t._('This video is still processing!', 'closeup.storyPin.videoPlaceholder', 'Let user know that this video is still processing')}),(0,c.jsx)(s.xv,{color:"inverse",children:t._('Check back in a few minutes.', 'closeup.storyPin.videoPlaceholder', 'Let user know to come back in a couple of minutes to view the video')})]})}var V=n(906623),B=n(570529),$=n(667665);let D=375,U=4,H=new s.Ry(3);function W({block:e,isActive:t,pwtTrackImageLoad:n,thumbnail:i}){let a=(0,v.ZP)(),s=e.image?.images?.["750x"]||e.image?.images?.["474x"],o=y({isUseCache:!0,signature:e.image_signature});if(!s&&!o)return null;let r=i?"cover":"none";return o?(0,c.jsx)(m,{alt:a._('Story pin image', 'closeup.storypin.renderer', 'Alt text for story pin image'),fallbackSrc:o.media?.src??"",fit:r,isActive:t,naturalHeight:s?.height??1,naturalWidth:s?.width??1,onLoad:n,src:s?.url??""}):(0,c.jsx)(u.Z,{alt:a._('Story pin image', 'closeup.storypin.renderer', 'Alt text for story pin image'),fit:r,isActive:t,naturalHeight:s?.height??1,naturalWidth:s?.width??1,onLoad:n,src:s?.url??""})}function K({activePageIndex:e,block:t,closeupStoryPinViewability:n,customEndCard:i,isActive:a,isSplitLayout:o=!1,musicRecordingId:r,muted:l,onEnded:d,onUpdateVideoInfo:p,ownerId:u,pageAspectRatio:h,pageDimensions:m,pageIndex:_,pinId:g,scaleFactor:f,stillLoading:b,videoThumbnailStartTime:x,thumbnail:v=!1}){let{block_style:{height:P=100,width:w=100,x_coord:S=0,y_coord:C=0}={},video:j}=t,A=D/h,{height:k,width:T}=m,I=w*D*f/100,E=P*A*f/100,z=(P<100?Math.min(Math.max(100,P)-Math.abs(C),P):Math.min(Math.max(P-Math.abs(C),0),100))*A*f/100,R=(w<100?Math.min(Math.max(100,w)-Math.abs(S),w):Math.min(Math.max(w-Math.abs(S),0),100))*D*f/100,M=Math.max(C,0)*A*f/100,N=Math.max(S,0)*D*f/100,O=y({isUseCache:!j,signature:t.video_signature});if(b)return null;let{media:F}=O||{},{duration:V,src:B}=F||{},$=!!B&&!!V;if(!j&&!$)return(0,c.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{left:N,top:M}},height:z,position:"absolute",width:R,children:(0,c.jsx)(Z,{ownerId:u})});let U=j?.video_list?.V_HLSV3_MOBILE||j?.video_list?.V_720P||$;return!!U&&(0,c.jsx)(s.xu,{height:o?"50%":"100%",overflow:"hidden",position:"relative",children:(0,c.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{left:N,top:M}},height:v?k:z,overflow:"hidden",position:"absolute",width:v?T:R,children:(0,c.jsx)(L.Z,{activePageIndex:e,blockHeight:v?k:E,blockWidth:v?T:I,closeupStoryPinViewability:n,customEndCard:i,isPlaying:a,musicRecordingId:r,muted:l,onEnded:d,onUpdateVideoInfo:p,pageIndex:_,pinId:g,roundCorners:E>=k&&I>=T,video:j||{video_list:{V_EXP7:{duration:V?1e3*V:0,url:B}}},videoThumbnailStartTime:x})})})}let X=void 0!==a?a:a=n(795912);function G({activePageIndex:e,block:t,closeupStoryPinViewability:n,customEndCard:i,disableProductStickers:a,fontsLoaded:o,isActive:r,isSplitLayout:l=!1,musicRecordingId:d,muteVideos:u,onEnded:h,onFlyoutOpen:m,onUpdateVideoInfo:_,ownerId:y,pageAspectRatio:g,pageHeight:f,pageIndex:b,pageWidth:x,pinId:v,previewOnly:P,pinKey:w,stillLoading:S=!1,thumbnail:j=!1,transform:A,videoPinProgress:T,videoThumbnailStartTime:I}){let z=(0,C.Z)(X,w),{block_style:{height:R=100,width:M=100,x_coord:N=0,y_coord:L=0}={},interactive_sticker_type:F=null}=t,Z=(0,B.g)(),U=(0,V.E)();if(0===R||0===M)return null;let H=x/D;switch(t.type){case k.h8.PARAGRAPH:case k.h8.HEADING:return(0,c.jsx)(O,{block:t,fontsLoaded:o,pageAspectRatio:g,scaleFactor:H,thumbnail:j});case k.h8.VIDEO:return(0,c.jsx)(K,{activePageIndex:e,block:t,closeupStoryPinViewability:n,customEndCard:i,isActive:r,isSplitLayout:l,musicRecordingId:d,muted:u,onEnded:h,onUpdateVideoInfo:_,ownerId:y,pageAspectRatio:g,pageDimensions:{height:f,width:x},pageIndex:b,pinId:v,scaleFactor:H,stillLoading:S,thumbnail:j,videoThumbnailStartTime:I});case k.h8.IMAGE:let{scaleX:G=1,scaleY:q=1}=A||{};return(0,c.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{height:`${R}%`,left:`${N*G}%`,top:`${L*q}%`,width:`${M}%`}},overflow:"hidden",position:"absolute",children:(0,c.jsx)(W,{block:t,isActive:r,pwtTrackImageLoad:()=>{Z&&r&&(Z.addBinaryAnnotation("pin.id",v,"STRING"),Z.addBinaryAnnotation("video",!1,"BOOL"),Z.stop()),U&&r&&(U.addBinaryAnnotation("pin.id",v,"STRING"),U.addBinaryAnnotation("video",!1,"BOOL"),U.removeConstraint($._z),U.markConstraintComplete($.pM))},thumbnail:j})});case k.h8.MENTION_STICKER:return!P&&(0,c.jsx)(E,{block:{...t},elementType:12120,onFlyoutOpen:m,pageAspectRatio:g,pageIndex:b,pinKey:null,scaleFactor:H,tooltipElementType:12121,videoPinProgress:T});case k.h8.GENERIC_STICKER:return!P&&(e=>{let t=5===F;return(0,c.jsx)(E,{block:{...e},elementType:t?12827:12858,onFlyoutOpen:m,pageAspectRatio:g,pageIndex:b,pinKey:null,scaleFactor:H,tooltipElementType:t?12828:12859,videoPinProgress:T})})(t);case k.h8.PRODUCT_STICKER:return!P&&!a&&(0,c.jsx)(E,{block:{...t},elementType:12223,onFlyoutOpen:m,pageAspectRatio:g,pageIndex:b,pinKey:z,scaleFactor:H,tooltipElementType:12224,videoPinProgress:T});case k.h8.VTO_MAKEUP_STICKER:return!P&&(0,c.jsx)(E,{block:{...t},elementType:12561,onFlyoutOpen:m,pageAspectRatio:g,pageIndex:b,pinKey:null,scaleFactor:H,tooltipElementType:12561,videoPinProgress:T});case k.h8.COMMENT_REPLY_STICKER:return t.type===k.h8.COMMENT_REPLY_STICKER&&!P&&(0,c.jsx)(p,{block:t,pageAspectRatio:g,scaleFactor:H});default:return null}}},475795:(e,t,n)=>{n.r(t),n.d(t,{default:()=>l});var i=n(883119),a=n(907932),s=n(140017),o=n(973868),r=n(785893);function l({controllerOptions:e,iconColor:t,iconOnly:n,buttonText:l,tabIndex:d=0,stackedCloseupEnabled:c=!1}){let p=(0,s.ZP)(),u=new i.Ry(5);return(0,r.jsx)(o.Z,{...e,children:({handleSendShareFlyoutButtonClick:e})=>(0,r.jsx)(i.u,{inline:!0,text:p._('Share', 'Closeup.SharePin.Icon', 'Icon for sharing the current pin'),zIndex:u,children:(0,r.jsx)(a.Z,{accessibilityLabel:p._('Send', 'Accessible label for button to send this pin', 'Accessible label for button to send this pin'),bgColor:c?"white":void 0,buttonText:l,handleClick:()=>e(),icon:"share",iconColor:t,iconOnly:n,tabIndex:d,testId:"closeup-share-button"})})})}},12163:(e,t,n)=>{n.d(t,{Z:()=>Z});var i=n(667294),a=n(883119),s=n(475795),o=n(214877),r=n(515278),l=n(140017),d=n(953565),c=n(785893);function p(e,t,n){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let u={overlay:{__style:{backgroundColor:"#000"}}};class h extends i.PureComponent{constructor(...e){super(...e),p(this,"handleRestartVideo",({event:e})=>{e.stopPropagation(),this.props.onRestartVideo?.({event:e}),(0,d.nP)("web.video.endcard.share",{sampleRate:1,tags:{status:"restart",variant:"enabled_send_first"}})}),p(this,"handleShareVideo",()=>{let{onToggleFlyout:e,isFlyoutOpen:t,pinId:n,requireAuth:i,logContextEvent:a}=this.props;if(t&&(0,d.nP)("web.video.endcard.share",{sampleRate:1,tags:{status:"shareSheetOpen",variant:"enabled_send_first"}}),a({event_type:101,component:179,object_id_str:n,view_type:3,view_parameter:156,element:11731}),i){i();return}e&&e()}),p(this,"handleExternalSend",()=>{(0,d.nP)("web.video.endcard.share",{sampleRate:1,tags:{status:"shareSheetOpen",variant:"enabled_send_first"}})}),p(this,"renderReplayButton",()=>(0,c.jsx)(a.iP,{accessibilityLabel:this.props.i18n._('Watch again', 'Button when pressed restarts the video', 'Button when pressed restarts the video'),onTap:this.handleRestartVideo,rounding:2,children:(0,c.jsxs)(a.xu,{alignItems:"center",display:"flex",padding:2,children:[(0,c.jsx)(a.xu,{marginEnd:3,children:(0,c.jsx)(a.JO,{accessibilityLabel:this.props.i18n._('Watch again', 'Button when pressed restarts the video', 'Button when pressed restarts the video'),color:"inverse",icon:"refresh",size:18})}),(0,c.jsx)(a.X6,{color:"light",overflow:"normal",size:"400",children:this.props.i18n._('Watch again', 'Clickable label when pressed restarts the video', 'Clickable label when pressed restarts the video')})]})})),p(this,"renderShareButton",()=>{let{gridDescription:e,imageSrc:t,isFlyoutOpen:n,onFlyoutDismiss:i,pinId:o}=this.props;return(0,c.jsx)(a.iP,{accessibilityLabel:this.props.i18n._('Send', 'end.video.send.icon.label', 'Clickable label when pressed opens share sheet after video is finished'),onTap:this.handleShareVideo,rounding:2,children:(0,c.jsxs)(a.xu,{alignItems:"center",display:"flex",justifyContent:"center",padding:2,children:[(0,c.jsx)(s.default,{controllerOptions:{flyoutDisplayOptions:{shownWithinMasonry:!0},loggingOptions:{component:179,element:72,onExternalSend:this.handleExternalSend,viewType:3},isFlyoutOpen:n,onFlyoutDismiss:i,onToggleFlyout:()=>{},sendObject:{type:"pin",description:e,id:o,imageUrl:t,url:`/pin/${o}/`}},iconColor:"white",iconOnly:!0,tabIndex:-1}),(0,c.jsx)(a.xu,{children:(0,c.jsx)(a.X6,{color:"light",overflow:"normal",size:"400",children:this.props.i18n._('Send', 'end.video.send.icon.label', 'Clickable label when pressed opens share sheet after video is finished')})})]})})})}componentDidMount(){let{pinId:e,logContextEvent:t}=this.props;(0,d.nP)("web.video.endcard.share",{sampleRate:1,tags:{status:"land",variant:"enabled_send_first"}}),t({event_type:13,component:179,object_id_str:e,view_type:3,view_parameter:156,element:11731})}render(){let{backgroundImage:e,naturalHeight:t,naturalWidth:n,pinTitle:i}=this.props;return(0,c.jsx)(a.xu,{children:(0,c.jsxs)(a.Ee,{alt:i||"",naturalHeight:t,naturalWidth:n,src:e,children:[(0,c.jsx)(a.xu,{bottom:!0,dangerouslySetInlineStyle:u.overlay,left:!0,position:"absolute",right:!0,top:!0}),(0,c.jsx)(a.xu,{alignItems:"center",direction:"column",display:"flex",height:"100%",justifyContent:"center",left:!0,position:"absolute",top:!0,width:"100%",children:(0,c.jsxs)(a.xu,{position:"absolute",children:[(0,c.jsx)(a.xu,{children:this.renderShareButton()}),(0,c.jsx)(a.xu,{alignSelf:"center",children:this.renderReplayButton()})]})})]})})}}function m(e){let{logContextEvent:t}=(0,o.v)(),n=(0,l.ZP)(),i=(0,r.Z)();return(0,c.jsx)(h,{...e,i18n:n,logContextEvent:t,requireAuth:i})}let _=({backgroundImage:e,naturalHeight:t,naturalWidth:n,onRestartVideo:i,pinTitle:s})=>{let o=(0,l.ZP)();return(0,c.jsx)(a.xu,{children:(0,c.jsxs)(a.Ee,{alt:s||"",naturalHeight:t,naturalWidth:n,src:e,children:[(0,c.jsx)(a.xu,{bottom:!0,dangerouslySetInlineStyle:u.overlay,left:!0,opacity:.8,position:"absolute",right:!0,top:!0}),(0,c.jsx)(a.xu,{alignItems:"center",display:"flex",height:"100%",justifyContent:"center",left:!0,position:"absolute",top:!0,width:"100%",children:(0,c.jsx)(a.xu,{children:(0,c.jsx)(a.iP,{onTap:i,rounding:2,children:(0,c.jsxs)(a.xu,{alignItems:"center",display:"flex",padding:2,children:[(0,c.jsx)(a.hU,{accessibilityLabel:o._('Replay', 'closeupVideo.endCard.ReplayButton', 'Button when pressed restarts the video'),icon:"refresh",iconColor:"white",size:"md"}),(0,c.jsx)(a.X6,{color:"light",overflow:"normal",size:"400",children:o._('Replay', 'closeupVideo.endCard.ReplayButton', 'Button when pressed restarts the video')})]})})})})]})})};var y=n(86785),g=n(340523),f=n(551587),b=n(906623),x=n(570529),v=n(970126),P=n(5859),w=n(910711),S=n(983435),C=n(749886),j=n(214164),A=n(623891),k=n(554786),T=n(115557),I=n(239821),E=n(923368),z=n(667665),R=n(181056),M=n(718561);function N(e,t,n){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let O=e=>!!e&&e.endsWith(".gif"),L=(e,t)=>{t({currentTime:e?.currentTime??0,duration:e?.duration??1})};class F extends i.Component{constructor(...e){super(...e),N(this,"state",{controls:"always"===this.props.showControls&&!this.props.disabled,fullscreen:!1,playing:!(0,y.G6)(this.props.requestContext.userAgent.browserName)&&!!this.props.autoplay&&!this.props.disabled,ready:!1,seeking:!1,showEndCard:!1,volume:this.props.muted||this.props.shouldMute?0:1,videoStartTime:this.props.videoStartTime||0}),N(this,"setVideoPwtLoadingStop",(e=!1)=>{if(!v.Z)return;let{storyPinStepStopwatch:t,pinId:n,pwtSurfaceContext:i}=this.props;t&&(e||t.addAnnotation("video.startup.end"),t.addBinaryAnnotation("pin.id",n,"STRING"),t.addBinaryAnnotation("video",!0,"BOOL"),t.addBinaryAnnotation("preload",e,"BOOL"),t.addSubspan({name:"perceived_video_load",endTime:v.Z.now()}),t.stop()),i&&(e||i.addAnnotation("video.startup.end"),i.addBinaryAnnotation("pin.id",n,"STRING"),i.addBinaryAnnotation("video",!0,"BOOL"),i.markConstraintComplete(z._z),i.addSubspan("perceived_video_load",null,v.Z.now()),"story_pin"===i.getMetricId().segment&&i.removeConstraint(z.pM))}),N(this,"componentDidMount",()=>{let{customThumbnail:e,video:t,preferMp4:n}=this.props,{mp4:i}=t,a=t.hlsv3||t.hls||null,{thumbnail:s}=n&&i||a||{},o=(0,R.j4)(e||s);o?.ready===4&&(this.setState({ready:!0}),this.props.autoplay&&this.setVideoPwtLoadingStop(!0))}),N(this,"componentDidUpdate",(e,t)=>{this.props.videoStartTime&&this.props.videoStartTime!==e.videoStartTime&&this.setState({videoStartTime:this.props.videoStartTime}),!1===e.isPlaying&&this.props.isPlaying&&this.setState({playing:!0,controls:"never"!==this.props.showControls}),e.isPlaying&&!1===this.props.isPlaying&&this.setState({playing:!1}),e.autoplay!==this.props.autoplay&&(this.setState({playing:!!this.props.autoplay}),this.props.autoplay&&this.state.ready&&this.setVideoPwtLoadingStop(!0)),e.muted!==this.props.muted&&this.setState({volume:this.props.muted?0:1}),"never"===this.props.showControls&&t.controls&&this.setState({controls:!1}),(t.controls||t.playing)&&this.props.disabled&&this.setState({playing:!1,controls:!1}),!t.playing&&this.state.playing&&this.props.onPlay&&this.props.onPlay()}),N(this,"handleTouch",()=>{let{seeking:e}=this.state,{disabled:t}=this.props;e||t||this.setState(e=>({playing:!e.playing}))}),N(this,"handleShowControls",()=>this.setState({controls:!0})),N(this,"handleHideControls",()=>this.setState({controls:!1})),N(this,"handleReady",()=>{let{ready:e,playing:t}=this.state,{autoplay:n,disabled:i}=this.props;n&&!e&&this.setVideoPwtLoadingStop(),this.setState({ready:!0}),(0,y.G6)(this.props.requestContext.userAgent.browserName)&&!t&&n&&!i&&this.setState({playing:!0})}),N(this,"handleEnded",({event:e})=>{let{customThumbnail:t,customEndCard:n,pinId:i,setCurrentVideo:a,loop:s,onEnded:o}=this.props;e.stopPropagation(),!s&&(this.setState({playing:!1}),O(t)||n||(this.setState({showEndCard:!0,videoStartTime:0}),a({pinId:i,isPromoted:!1,currentTime:0})),this.state.fullscreen&&this.exitFullscreen()),o&&o()}),N(this,"handlePause",({event:e})=>{e.stopPropagation(),this.setState({playing:!1})}),N(this,"handlePlay",({event:e})=>{e.stopPropagation(),this.setState({playing:!0})}),N(this,"handleFullscreenChange",({event:e,fullscreen:t})=>{e.stopPropagation(),this.setState({fullscreen:t})}),N(this,"handlePlayheadDown",()=>{this.setState({seeking:!0})}),N(this,"handlePlayheadUp",()=>{setTimeout(()=>{this.setState({seeking:!1})},500)}),N(this,"handleRestartVideo",({event:e})=>{e.stopPropagation(),this.setState({playing:!0,showEndCard:!1})}),N(this,"handleShareRestartVideo",({event:e})=>{e.stopPropagation(),this.setState({playing:!0,showEndCard:!1})}),N(this,"handleVolumeChange",({event:e,volume:t})=>{let{shouldMute:n}=this.props;e.stopPropagation(),n||this.setState({volume:t})}),N(this,"exitFullscreen",()=>{let{document:e}=window;(e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement)&&(e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen())}),N(this,"requestFullscreen",()=>{let{customThumbnail:e,video:t,preferMp4:n}=this.props,{mp4:i}=t,a=t.hlsv3||t.hls||null,{thumbnail:s}=n&&i||a||{},o=(0,R.j4)(e||s);o.requestFullscreen?o.requestFullscreen():o.webkitRequestFullscreen?o.webkitRequestFullscreen():o.mozRequestFullScreen?o.mozRequestFullScreen():o.msRequestFullscreen&&o.msRequestFullscreen()}),N(this,"renderCloseupVideoEndCard",(e,t,n,i)=>{let a={backgroundImage:e,naturalHeight:t,naturalWidth:n,onRestartVideo:this.handleShareRestartVideo},s={backgroundImage:e,naturalHeight:t,naturalWidth:n,onRestartVideo:this.handleRestartVideo},{flyoutShareProps:o}=this.props,r={gridDescription:o?o.gridDescription:"",imageSrc:o?o.imageSrc:"",isFlyoutOpen:!!o&&o.isFlyoutOpen,onFlyoutDismiss:o?o.onFlyoutDismiss:()=>{},onToggleFlyout:o?o.onToggleFlyout:()=>{},pinId:o?o.pinId:""};return i?(0,c.jsx)(_,{...s}):(0,c.jsx)(m,{...r,...a})})}render(){let e;let{autoplay:t,closeupStoryPinViewability:n,contextLogData:i={component:179,is_closeup_video:!0,objectId:this.props.pinId,view:3,viewParameter:156},customThumbnail:s,isPromoted:o,loop:r,objectFit:l,preferMp4:d,preload:p,requestContext:u,roundingOverride:h,showControls:m,variant:_,video:g,captions:b,isDesktop:x,videoThumbnailStartTime:v,pinId:P,setProgressInfo:j,progressInfo:A,setPanelOpen:k,panelOpen:I,setMute:E,isMuted:z,captionsExpGroup:N,stackedCloseupEnabled:O,onTimeChange:F,startLevelHlsExpGroup:Z}=this.props;i.is_closeup_video=!0;let{controls:V,fullscreen:B,playing:$,showEndCard:D,volume:U,videoStartTime:H}=this.state,W=g.hlsv3||g.hls||null;if(!W&&!g.mp4)return null;let{mp4:K}=g,X=d&&K&&K.url||W&&[{type:"video/m3u8",src:W.url}]||void 0,{height:G,thumbnail:q,width:Y}=d&&K||W||{},Q=s||q;return e=null!=h?h:"default"===_?0:"storyPin"===_?C.yR:2,(0,c.jsxs)(a.zd,{rounding:O?void 0:e,wash:!0,willChangeTransform:!((0,y.G6)(u.userAgent.browserName)&&B),children:[D?this.renderCloseupVideoEndCard(Q??"",G??1,Y??1,o):(0,c.jsxs)(a.iP,{accessibilityLabel:this.props.i18n._('Pause or play video', 'pin.closeup.video.tap', 'tap area to pause or play video'),onMouseEnter:"hover"===m?this.handleShowControls:void 0,onMouseLeave:"hover"===m?this.handleHideControls:void 0,onTap:this.handleTouch,rounding:2,children:[(0,c.jsx)(w.Z,{playing:$,zIndexValue:99}),(0,c.jsx)(M.ZP,{aspectRatio:(Y??1)/(G??1),captions:b&&(0,f.Z)(N||"")||"storyPin"===_?b:"",closeupStoryPinViewability:n,contextLogData:{...i,video_id:this.props.video.id},controls:!(N&&(0,f.Z)(N))&&!O&&V,hlsConfig:{startLevel:Z?-1:R.VS},isAutoPlay:!!t,loop:r,objectFit:l,onControlsPause:this.handlePause,onControlsPlay:this.handlePlay,onEnded:this.handleEnded,onFullscreenChange:this.handleFullscreenChange,onPlay:()=>{},onPlayError:()=>{},onPlayheadDown:this.handlePlayheadDown,onPlayheadUp:this.handlePlayheadUp,onReady:this.handleReady,onTimeChange:"storyPin"!==_||O?({time:e})=>{if(L&&"number"==typeof K?.duration&&K.duration>0&&j){let t=K.duration/T.gJ;L({currentTime:e,duration:t},j)}}:F,onVolumeChange:this.handleVolumeChange,playing:$,poster:Q,preferMp4:d,preload:p,src:X,videoStartTime:H||v,volume:U})]}),(0,c.jsx)(a.xu,{onMouseEnter:"hover"===m?this.handleShowControls:void 0,onMouseLeave:"hover"===m?this.handleHideControls:void 0,children:("storyPin"!==_&&N&&(0,f.Z)(N)||O)&&(0,c.jsx)(a.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{...R.Ul,flexDirection:"column-reverse"}},display:"flex",height:R.hy,paddingX:6,position:"absolute",width:O?"100%":"calc(100% - 4px)",zIndex:C.Gf,children:(0,c.jsx)(S.Z,{activePageIndex:0,captionsExpGroup:N,captionsUrl:b,handleMute:()=>{this.setState({volume:z?1:0}),E(!z)},handlePanelChange:()=>{k&&k(!I),I&&x&&this.requestFullscreen()},handlePause:()=>{this.setState({playing:!1})},handlePausePlay:()=>{this.setState({playing:!$})},handlePlay:()=>{this.setState({playing:!0})},handleWatchAgain:this.handleRestartVideo,isMuted:z,isPanelOpen:I,isPlaying:$,isStoryPin:!1,pageCount:1,pages:[],pinId:P,progressInfo:A,showEndCard:D,showVideoControls:V,viewParameter:156})})})]})}}function Z(e){let t=(0,l.ZP)(),n=(0,P.B)(),{isAuthenticated:a}=n,s=(0,x.g)(),o=(0,b.E)(),{seekTime:r}=(0,j.Hx)(),{stackedCloseupEnabled:d}=(0,E.x4)(),{pinId:p,isPromoted:u,video:h,muted:m,variant:_}=e,{appUI:y,setCurrentVideo:f}=(0,I.I)(),{videosAutoplaying:v}=y,{organicVideosAutoplaying:w,promotedVideosAutoplaying:S}=v,C=n.locale.toLowerCase(),T=(h.mp4?.captions_urls||h.hlsv3?.captions_urls)??{},z=C&&T[C]||Object.values(T)[0]||"",{checkExperiment:R}=(0,g.F)(),M=(0,k.HG)(),N="storyPin"!==_&&z&&M&&a?R("auth_desktop_video_pin_captions").group:"",O=R("web_hls_start_up_level").anyEnabled,L=u?S[p]:w[p],Z=(0,A.Z)(),V=parseInt(Z.t||0,10),[B,$]=(0,i.useState)(L?.currentTime||0),[D,U]=(0,i.useState)(null),[H,W]=(0,i.useState)(!0),[K,X]=(0,i.useState)(m);return(0,i.useEffect)(()=>{let e=B;V>0&&(e=V),r&&(e=r),$(e)},[r,V,B]),(0,c.jsx)(F,{...e,captions:String(z)||"",captionsExpGroup:N,i18n:t,isDesktop:M,isMuted:K,isPlaying:!L||!L.paused,panelOpen:H,progressInfo:D,pwtSurfaceContext:o,requestContext:n,setCurrentVideo:f,setMute:X,setPanelOpen:W,setProgressInfo:U,stackedCloseupEnabled:d,startLevelHlsExpGroup:O,storyPinStepStopwatch:s,videoStartTime:B})}N(F,"defaultProps",{loop:!1,showControls:"hover"})},911344:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(537347),a=n.n(i),s=n(953565);function o(e){if("undefined"==typeof window||!document.head)return(0,s.nP)("load_fonts.failure",{sampleRate:1,tags:{failure_reason:"window undefined"}}),Promise.reject(Error("Window is undefined or no head on the document. Unable to load fonts"));let{head:t}=document,n=[];return e.forEach(e=>{e.styles.forEach(i=>{let s=document.querySelector(`#${e.fontFamily??""}-${i.name}`);if(!s){if((s=document.createElement("style")).setAttribute("id",`${e.fontFamily??""}-${i.name}`),t.appendChild(s),e.format&&i.fontUrl&&s&&s.sheet){let t=s.sheet;t.insertRule(`
            @font-face {
              font-family: "${e.fontFamily??""}";
              font-style: "${i.fontStyle}";
              font-weight: "${i.fontWeight}";
              src: url("${i.fontUrl}") format("${e.format}");
            }
          `,0)}n.push(new(a())(e.fontFamily,{style:i.fontStyle,weight:i.fontWeight}).load())}})}),Promise.all(n).then(()=>{Promise.resolve()}).catch(e=>{(0,s.nP)("load_fonts.failure",{sampleRate:1,tags:{failure_reason:"unsuccessful load"}}),Promise.reject(e)})}},471314:(e,t,n)=>{n.d(t,{Z:()=>w});var i=n(667294),a=n(342513),s=n(297329),o=n(297315),r=n(608029),l=n(107860),d=n(309300),c=n(521525),p=n(819281),u=n(793250),h=n(363404),m=n(840387),_=n(889998),y=n(59648),g=n(404373),f=n(970126);let b=(0,r.XV)("PwtStopwatch"),x=(e,t)=>{if(f.Z){if("start"===t.type&&!e.isTiming){let{name:n,startTime:i,navigationType:a}=t;return(0,s.A9)(`TIMING.${n}`),{isTiming:!0,name:n,isSampled:t.isSampled,startTime:"number"==typeof i?i:f.Z.now(),metricId:{type:"stopwatch",name:n,navigationType:a},pwtStaticContext:t.pwtStaticContext,annotations:e.annotations,binaryAnnotations:e.binaryAnnotations,spans:e.spans,traceId:e.traceId,spanNameUpdates:e.spanNameUpdates}}if(!e.isTiming){if(t.bypassIsTimingCheck)b("allowing action while stopwatch is not actively timing (bypassIsTimingCheck is set to true)",t);else{let n=t.name||e.name;return b("ignoring action - stopwatch is not actively timing",t),(0,s.A9)(`WARN.${n}.noTiming.${t.type}`),e}}if("annotate"===t.type){let n=f.Z.now();return b(`adding annotation {${t.label}: ${n}}`),{...e,annotations:e.annotations.concat([{label:t.label,timestamp:n}])}}if("binaryAnnotate"===t.type)return b(`adding binary annotation {${t.name}: ${String(t.value)}}`),{...e,binaryAnnotations:{...e.binaryAnnotations,[t.name]:{value:t.value,type:t.annotationType}}};if("binaryAnnotateOperation"===t.type){let{value:n,type:i}=t.binaryAnnotationValueAndType;if(!e.binaryAnnotations[t.name])return{...e,binaryAnnotations:{...e.binaryAnnotations,[t.name]:{value:n,type:i}}};{let a=e.binaryAnnotations[t.name].value||0;return b(`operating on binary annotation {
          name: ${t.name}
          pervious value: ${String(a)}
          operand: ${String(n)}
        }`),{...e,binaryAnnotations:{...e.binaryAnnotations,[t.name]:{value:n?t.operation(a,n):a,type:i}}}}}if("addSubspan"===t.type){b(`adding subspan {${t.name}}`);let n=e.spans.findIndex(e=>e.name===t.name);-1!==n&&b(`WARNING: adding duplicate subspan name {${t.name}}`);let i=t.id||(0,g.Z)(),a=e.spans.findIndex(e=>e.id===i);-1!==a&&b(`WARNING: adding duplicate subspan id {${t.name}: ${i}}`);let s=0;return t.startTime?s=t.startTime:e.startTime?s=e.startTime:b(`WARNING: adding subspan {${t.name}} without start time`),{...e,spans:[...e.spans,{name:t.name,id:i,startTime:s,endTime:t.endTime||1/0,annotationMap:{...t.annotations},binaryAnnotationMap:{...t.binaryAnnotations},parentId:t.parentId}]}}if("subspanStart"===t.type){b(`starting subspan {${t.name}}`);let n=e.spans.findIndex(e=>e.name===t.name);-1!==n&&b(`WARNING: starting duplicate subspan name {${t.name}}`);let i=t.id||(0,g.Z)(),a=e.spans.findIndex(e=>e.id===i);-1!==a&&b(`WARNING: starting duplicate subspan id {${t.name}: ${i}}`);let s=t.parentName?e.spans.find(e=>e.name===t.parentName)?.id:null;return{...e,spans:[...e.spans,{name:t.name,id:i,parentId:t.parentId||s,startTime:f.Z.now(),endTime:1/0,annotationMap:{...t.annotations},binaryAnnotationMap:{...t.binaryAnnotations}}]}}if("subspanStop"===t.type){if(b(`stopping subspan {${t.name}}`),!t.id){let n=e.spans.filter(e=>e.name===t.name);n.length>1&&(0,s.H)("duplicate_subspan_stop_name",{name:t.name,type:t.type})}let n=t.id?e.spans.findIndex(e=>e.id===t.id):e.spans.findIndex(e=>e.name===t.name);return n>-1?(e.spans[n].endTime=f.Z.now(),t.annotations&&(e.spans[n].annotationMap={...e.spans[n].annotationMap,...t.annotations}),t.binaryAnnotations&&(e.spans[n].binaryAnnotationMap={...e.spans[n].binaryAnnotationMap,...t.binaryAnnotations})):(0,s.H)("invalid_subspan_stop_name",{name:t.name}),e}if("subspanUpdateName"===t.type){let n=e.spans.filter(e=>e.name===t.currentName);n.length>1&&(0,s.H)("duplicate_subspan_stop_name",{name:t.currentName,type:t.type});let i=e.spans.findIndex(e=>e.name===t.currentName);return i>-1?t.updateWhenStopwatchCompletes?e.spanNameUpdates=[...e.spanNameUpdates,{currentName:t.currentName,newName:t.newName}]:(b(`renaming subspan {${t.currentName}} to {${t.newName}}`),e.spans[i].name=t.newName):(0,s.H)("no_subspan_found_to_rename",{name:t.currentName}),e}if("stop"===t.type&&e.isTiming){let{startTime:n,metricId:i,pwtStaticContext:a,annotations:s,binaryAnnotations:o,isSampled:r,spans:y,traceId:x}=e;if(t.stopwatchPerformanceObserver&&t.stopwatchPerformanceObserver.disconnect(),r){let r=t.stopTime||f.Z.now(),v=[...y.map(t=>{t.endTime===1/0&&(t.endTime=r);let n=e.spanNameUpdates.findIndex(e=>t.name===e.currentName);return n>-1&&(b(`renaming subspan {${t.name}} to {${e.spanNameUpdates[n].newName}}`),t.name=e.spanNameUpdates[n].newName,e.spanNameUpdates=e.spanNameUpdates.filter(e=>e.newName!==t.name)),t})];if(t.manualAndResourceSpans||0===y.length){let e=(0,g.Z)();v.push({name:"network_resources",id:e,startTime:n,endTime:r,annotationMap:{},binaryAnnotationMap:{},parentId:null},...(t.customStopwatchBuffer||[]).map(t=>(0,m.Z)((0,u.p)(t,[]),e)).filter(Boolean))}let P="initial_app_load"===i.navigationType&&(0,p.Z)(),w={type:"COMPLETE",traceId:x,startTime:n,endTime:r,spans:v,annotationMap:{...(0,_.Z)(s),...(0,d.jh)("browser_",P?(0,d.D3)(P):{}),...(0,d.jh)("mark_",(0,l.gQ)())},binaryAnnotationMap:(0,c.ng)({metricId:i,pwtStaticContext:a,binaryAnnotations:o,performanceResourceTimings:t.customStopwatchBuffer||[]})};(0,h.Z)({metricId:i,pwtStaticContext:a,result:w})}return{isTiming:!1,name:e.name,annotations:[],binaryAnnotations:{},spans:[],traceId:(0,g.Z)(),spanNameUpdates:[]}}if("error"===t.type){let{error:n,stopwatchPerformanceObserver:i}=t;return n&&(0,s.H)(n),i&&i.disconnect(),{isTiming:!1,name:e.name,annotations:[],binaryAnnotations:{},spans:[],traceId:(0,g.Z)(),spanNameUpdates:[]}}if("abort"===t.type&&e.isTiming){t.stopwatchPerformanceObserver&&t.stopwatchPerformanceObserver.disconnect();let{metricId:n,pwtStaticContext:i}=e,a=t.reason||"";return(0,h.Z)({metricId:n,pwtStaticContext:i,result:{type:"ABORT",reason:a}}),{isTiming:!1,name:e.name,annotations:[],binaryAnnotations:{},spans:[],traceId:(0,g.Z)(),spanNameUpdates:[]}}}return e},v=({name:e,sampleRate:t,navigationType:n,manualAndResourceSpans:a=!1})=>{let s=(0,o.N5)(),r=(0,i.useRef)([]),l=(0,i.useRef)(null),[d,c]=(0,i.useReducer)(x,{isTiming:!1,name:e,annotations:[],binaryAnnotations:{},spans:[],traceId:(0,g.Z)(),spanNameUpdates:[]});return s?{isTiming:d.isTiming,start:i=>(window.PerformanceObserver&&(r.current=[],l.current=(0,y.Z)({entryTypes:["resource"]},e=>{r.current=r.current.concat(e.getEntries()),r.current.length>1e3&&(r.current=r.current.slice(-1e3))})),c({type:"start",startTime:i,name:e,navigationType:n,pwtStaticContext:s,isSampled:!t||Math.random()<t})),stop:e=>c({type:"stop",stopTime:e,stopwatchPerformanceObserver:l.current,customStopwatchBuffer:r.current,manualAndResourceSpans:a}),error:e=>{c({type:"error",stopwatchPerformanceObserver:l.current,error:e})},abort:e=>c({type:"abort",stopwatchPerformanceObserver:l.current,customStopwatchBuffer:r.current,reason:e}),annotate:(e,t,n=!1)=>c({type:"annotate",label:e,parentId:t,bypassIsTimingCheck:n}),binaryAnnotate:(e,t,n,i,a=!1)=>c({type:"binaryAnnotate",name:e,value:t,annotationType:n,parentId:i,bypassIsTimingCheck:a}),binaryAnnotateOperation:({name:e,binaryAnnotationValueAndType:t,operation:n,parentId:i,bypassIsTimingCheck:a=!1})=>c({type:"binaryAnnotateOperation",name:e,binaryAnnotationValueAndType:t,operation:n,parentId:i,bypassIsTimingCheck:a}),addSubspan:({name:e,startTime:t,endTime:n,annotations:i={},binaryAnnotations:a={},parentId:s=null,id:o=null,bypassIsTimingCheck:r=!1})=>c({type:"addSubspan",name:e,startTime:t,endTime:n,annotations:i,binaryAnnotations:a,parentId:s,id:o,bypassIsTimingCheck:r}),subspanStart:({name:e,annotations:t={},binaryAnnotations:n={},parentId:i=null,parentName:a=null,id:s=null,bypassIsTimingCheck:o=!1})=>c({type:"subspanStart",name:e,annotations:t,binaryAnnotations:n,parentId:i,parentName:a,id:s,bypassIsTimingCheck:o}),subspanStop:({name:e,annotations:t,binaryAnnotations:n,id:i,parentId:a,bypassIsTimingCheck:s=!1})=>c({type:"subspanStop",name:e,annotations:t,binaryAnnotations:n,id:i,parentId:a,bypassIsTimingCheck:s}),subspanUpdateName:({currentName:e,newName:t,bypassIsTimingCheck:n,updateWhenStopwatchCompletes:i=!0})=>c({type:"subspanUpdateName",currentName:e,newName:t,bypassIsTimingCheck:n,updateWhenStopwatchCompletes:i}),getSpans:(e,t)=>d.spans.filter(n=>n[e]===t),getTraceId:()=>d.traceId}:null};var P=n(785893);let w=({name:e,sampleRate:t,abortOnUnloadOrClientNavigation:n=!0,navigationType:r,manualAndResourceSpans:l=!1})=>{let{Provider:d,useMaybeHook:c}=(0,a.Z)(`Stopwatch_${e}`);return{Provider:function({children:a}){let c=v({name:e,sampleRate:t,navigationType:r,manualAndResourceSpans:l}),p=(0,o.fM)(),u=p?p.time:0,h=(0,i.useRef)(!1),m=c?.isTiming,_=(0,i.useCallback)(t=>{h.current?(h.current=!1,c?.abort(t)):(0,s.A9)(`WARN.${e}.noTiming.abort`)},[c]),y=(0,i.useCallback)((e,t)=>{c?.annotate(e,t)},[c]),g=(0,i.useCallback)((e,t,n,i)=>{c?.binaryAnnotate(e,t,n,i)},[c]),f=(0,i.useCallback)(({name:e,binaryAnnotationValueAndType:t,operation:n,parentId:i,bypassIsTimingCheck:a})=>{c?.binaryAnnotateOperation({name:e,binaryAnnotationValueAndType:t,operation:n,parentId:i,bypassIsTimingCheck:a})},[c]),b=(0,i.useCallback)(({name:e,startTime:t,endTime:n,annotations:i,binaryAnnotations:a,parentId:s,id:o,bypassIsTimingCheck:r})=>{c?.addSubspan({name:e,startTime:t,endTime:n,annotations:i,binaryAnnotations:a,parentId:s,id:o,bypassIsTimingCheck:r})},[c]),x=(0,i.useCallback)(({name:e,annotations:t,binaryAnnotations:n,parentId:i,parentName:a,id:s,bypassIsTimingCheck:o})=>{c?.subspanStart({name:e,annotations:t,binaryAnnotations:n,parentId:i,parentName:a,id:s,bypassIsTimingCheck:o})},[c]),w=(0,i.useCallback)(({name:e,annotations:t,binaryAnnotations:n,id:i,parentId:a,bypassIsTimingCheck:s})=>{c?.subspanStop({name:e,annotations:t,binaryAnnotations:n,id:i,parentId:a,bypassIsTimingCheck:s})},[c]),S=(0,i.useCallback)(({currentName:e,newName:t,bypassIsTimingCheck:n,updateWhenStopwatchCompletes:i})=>{c?.subspanUpdateName({currentName:e,newName:t,bypassIsTimingCheck:n,updateWhenStopwatchCompletes:i})},[c]),C=(0,i.useCallback)((e,t)=>c?c.getSpans(e,t):[],[c]),j=(0,i.useCallback)(()=>c?c.getTraceId():0,[c]),A=(0,i.useCallback)(t=>{h.current?(h.current=!1,c?.error(t)):(0,s.A9)(`WARN.${e}.noTiming.error`)},[c]),k=(0,i.useCallback)(e=>{h.current&&c?.abort("duplicated_init_stopwatch_action"),h.current=!0,c?.start(e)},[c]),T=(0,i.useCallback)(t=>{h.current?(h.current=!1,c?.stop(t)):(0,s.A9)(`WARN.${e}.noTiming.stop`)},[c]);(0,i.useEffect)(()=>()=>{n&&_("unloadOrClientNavigation")},[u]);let I=(0,i.useMemo)(()=>({isTiming:m,abort:_,addAnnotation:y,addBinaryAnnotation:g,binaryAnnotationOperation:f,addSubspan:b,subspanStart:x,subspanStop:w,getSpans:C,getTraceId:j,updateSubspanName:S,stop:T,error:A,start:k}),[m,_,y,g,f,b,x,w,C,j,S,T,A,k]);return(0,P.jsx)(d,{value:I,children:a})},useHook:c}}},570529:(e,t,n)=>{n.d(t,{T:()=>o,g:()=>r});var i=n(471314);let{Provider:a,useHook:s}=(0,i.Z)({name:"story_pin_step",sampleRate:1}),o=a,r=s},766742:(e,t,n)=>{n.d(t,{BN:()=>c,RK:()=>d,d3:()=>u,tq:()=>h,xm:()=>p});var i=n(667294),a=n(911344),s=n(749886),o=n(685247),r=n(494125);let l=(e,t)=>{let n=(0,s.pE)(e,t);return`${n.y}px ${n.x}px`},d=({alignment:e,verticalAlignment:t})=>{let n={alignItems:"flex-start",display:"flex",height:"100%",justifyContent:"start",textAlign:"left",width:"100%"};return 1===t?n.alignItems="center":2===t&&(n.alignItems="flex-end"),1===e&&(n.justifyContent="center",n.textAlign="center"),n},c=({fontSize:e,hexColor:t,highlightColor:n,letterSpacing:i,lineHeight:a,name:s})=>({fontSize:e,letterSpacing:i,color:t,fontFamily:s,margin:0,maxHeight:"100%",textShadow:!n&&t&&"#ffffff"===t.toLowerCase()?"0px 1px 4px rgba(0, 0, 0, 0.2)":void 0,wordBreak:"break-word",...n?{backgroundColor:n,borderRadius:e/5,padding:l(e,a)}:{}}),p=({fontSize:e,hasText:t,highlightColor:n,lineHeight:i})=>({...n?{backgroundColor:t?n:void 0,borderRadius:e/5,padding:l(e,i)}:{}}),u=({letterSpacing:e,lineHeight:t,name:n,url:i})=>({fontFamily:n,fontGroup:"",fontOverrides:{letterSpacing:e,lineHeight:t,textTransform:!1},format:"truetype",defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"normal",fontUrl:i}]}),h=({hasPin:e,pages:t,limitToSingleFont:n})=>{let[l,d]=(0,i.useState)(!1),[c,p]=(0,i.useState)(()=>!!e&&(0,o.X7)(t)),h=()=>{let e=t.reduce((e,t)=>{let i=t?.blocks?.filter(e=>[s.h8.PARAGRAPH,s.h8.HEADING].includes(e.type))||[];return n&&i.length>1&&(i=[i[0]]),i.forEach(t=>{let n=t.style?.font||s.Cc.font,{name:i=""}=n;e[i]||(e[i]=n)}),e},{});if(Object.keys(e).length>0){let t=Object.keys(e).map(t=>{let n=e[t];return u({letterSpacing:n.letter_spacing,lineHeight:n.line_height,name:n.name,url:n.url})});(0,a.Z)(t),d(!0)}};return(0,r.Z)(()=>{h()}),(0,r.Z)(()=>{c||h()}),(0,i.useEffect)(()=>{c||p((0,o.X7)(t))},[c,t]),{fontsLoaded:l,mediaDataReceived:c}}},520718:(e,t,n)=>{n.d(t,{Z:()=>i});function i({currentTime:e,endTime:t,startTime:n}){return"number"!=typeof n||"number"!=typeof t||!(n>=0)||!(t>0)||!(n<t)||n<=e&&e<=t}},685247:(e,t,n)=>{n.d(t,{B7:()=>o,X7:()=>r,n4:()=>s});var i=n(749886);function a(e,t,n){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let s=(e,t)=>{let n=/^\d{1,3}\.\d{1,3}(?:\.\d{1,6})?$/;if(!e?.match(n)||!t?.match(n))return null;let i=e?.split("."),a=t?.split("."),s=Math.max((i??"").length,(a??"").length);for(let e=0;e<s;e+=1){let t=e<(i?.length??0)?parseInt(i?.[e],10):0,n=e<(a?.length??0)?parseInt(a?.[e],10):0;if(t<n)return -1;if(t>n)return 1}return 0};class o{constructor(e,t,n){if(a(this,"start",Date.now()),a(this,"paused",!1),this.onProgress=e,this.onComplete=t,this.duration=n,this.remaining=n,"undefined"==typeof window)return;this.intervalId=window.setInterval(()=>{let e=this.paused?this.duration-this.remaining:this.duration-this.remaining+(Date.now()-this.start);this.onProgress(e/this.duration)},500),this.resume()}currentTime(){return this.duration-this.remaining}pause(){this.paused=!0,window.clearTimeout(this.timerId),this.remaining-=Date.now()-this.start;let e=this.duration-this.remaining;this.onProgress(e/this.duration)}resume(){this.paused=!1,this.start=Date.now(),window.clearTimeout(this.timerId),this.timerId=window.setTimeout(this.onComplete,this.remaining)}clear(){window.clearTimeout(this.timerId),window.clearInterval(this.intervalId)}}let r=e=>e.some(e=>(e?.blocks??[]).some(e=>e.type===i.h8.IMAGE&&!!e.image||e.type===i.h8.VIDEO&&(!!e.video||!!e.video_signature)))},973868:(e,t,n)=>{n.d(t,{Z:()=>h});var i=n(667294),a=n(883119),s=n(515278),o=n(930837),r=n(140017),l=n(923368),d=n(898233),c=n(785893);let p=new a.Ry(3);function u({anchor:e,children:t,displayOptions:n,onFlyoutDismiss:i}){let s=(0,r.ZP)(),{stackedCloseupEnabled:d}=(0,l.x4)();return n?.shownWithinMasonry||n?.shownWithinProfileHeader?(0,c.jsx)(a.mh,{zIndex:n.shownWithinProfileHeader||d&&n?.shownWithinMasonry?p:void 0,children:(0,c.jsx)(a.xu,{position:n.inModal?"absolute":void 0,top:!!n.inModal||void 0,zIndex:n.inModal?o.b7:void 0,children:(0,c.jsx)(a.J2,{_deprecatedShowCaret:n.showCaret,accessibilityLabel:s._('Share Menu', 'SendShareController.ShareMenu.accessibilityLabel', 'Accessbililty label for the share menu.'),anchor:e,idealDirection:n.idealDirection??"down",onDismiss:()=>{i()},positionRelativeToAnchor:!1,size:"flexible",children:t})})}):(0,c.jsx)(a.J2,{_deprecatedShowCaret:n?.showCaret,accessibilityLabel:s._('Share Menu', 'SendShareController.ShareMenu.accessibilityLabel', 'Accessbililty label for the share menu.'),anchor:e,idealDirection:n?.idealDirection??"down",onDismiss:()=>{i()},size:"flexible",children:t})}function h({children:e,flyoutDisplayOptions:t,isFlyoutOpen:n,loggingOptions:o,onClick:r,onFlyoutDismiss:l,onToggleFlyout:p,sendObject:h}){let m=(0,i.useRef)(null),_=(0,s.Z)();return(0,c.jsxs)(a.xu,{ref:m,dangerouslySetInlineStyle:{__style:{pointerEvents:"auto"}},children:[(0,c.jsx)(a.xu,{children:e({handleSendShareFlyoutButtonClick:()=>{if(_){_();return}p()}})}),n&&(0,c.jsx)(u,{anchor:m.current,displayOptions:t,onFlyoutDismiss:l,children:(0,c.jsx)(d.Z,{component:o.component,element:o.element,onExternalSend:o.onExternalSend,onHide:()=>{r?.(),l()},sendType:h.type,sharedObject:{...h,type:"user"===h.type?"pinner":h.type},viewParameter:o.viewParameter,viewType:o.viewType})})]})}},851193:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(837639);function a(e){return{defaultStyle:0,fontFamily:e.name??"",fontGroup:i.gu,fontOverrides:{letterSpacing:e.letter_spacing,lineHeight:e.line_height},format:"truetype",id:e.id,styles:[{fontStyle:"",fontUrl:e.url,fontWeight:"normal",name:"normal"}]}}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/90328-2d4103fec4053d32.mjs.map