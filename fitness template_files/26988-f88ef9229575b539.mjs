"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[26988],{481177:(e,t,r)=>{r.d(t,{Z:()=>i});let i={AMP_TRACKING_DOMAIN:"amp.pinterest.com",BoardPrivacy:{SECRET:"secret",PUBLIC:"public",PROTECTED:"protected"},BoardType:{PROTECTED:"protected"},BulkAction:{MOVE:"bulkMove",COPY:"bulkCopy",CREATE_SECTION:"bulkCreateSection",DELETE:"bulkDelete"},MAX_CHARS_FOR_BOARD_PIN_DESCRIPTION:500,MAX_CHARS_FOR_BOARD_TITLE:50,MAX_CHARS_FOR_FIRST_NAME:30,MAX_FETCH_NUM_FOLLOWERS_PER_PAGE:50,MAX_STORED_VISITED_PIN_PAGES:10,VIDEO_IFRAME_ID:"video-iframe"}},406893:(e,t,r)=>{r.d(t,{Z:()=>a}),r(441143);var i=r(785893);class n{static factory(e){return e instanceof n?e:new n(String(e))}constructor(e){this._private_safe_value=e.trim().replace(">",">").replace("<","<").replace("&","&").replace('"','"').replace("'","'")}toString(){return this._private_safe_value}}function a(e){let{css:t,unsafeCSS:r,...a}=e,s=String(t||"")||r||"",o=!!s;return o?(0,i.jsx)("style",{...a,dangerouslySetInnerHTML:{__html:String(n.factory(s))}}):null}},587703:(e,t,r)=>{r.d(t,{Z:()=>n});var i=r(214877);let n=()=>(0,i.v)().logContextEvent},541841:(e,t,r)=>{r.d(t,{Z:()=>o});var i=r(667294),n=r(973935);function a(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends i.Component{constructor(...e){super(...e),a(this,"observer",null),a(this,"handleVisibilityChanged",(e,t)=>{this.props.onVisibilityChange(e,t)})}componentDidMount(){let e=n.findDOMNode(this);e instanceof HTMLElement&&(this.node=e),this.node&&(this.observer=new window.IntersectionObserver(this.handleVisibilityChanged,this.props.options),this.observer.observe(this.node))}componentWillUnmount(){this.observer&&(this.observer.unobserve(this.node),delete this.observer)}render(){return i.Children.only(this.props.children)}}let o=s},25919:(e,t,r)=>{let i;r.d(t,{Am:()=>y,Ig:()=>f,N:()=>x,Sd:()=>g,YX:()=>v,be:()=>b,fO:()=>p,kd:()=>_,pz:()=>m});var n=r(667294),a=r(216167),s=r(587703),o=r(703404),l=r(957753),u=r(107366),c=r(953565);let d=(e,t,r={})=>(0,c.nP)(`${e}.${t}`,{sampleRate:1,tags:r}),p=(e,t)=>r=>{let i=t?{extra_context:e,targeting:t}:{extra_context:e};return a.Z.create("UserExperiencePlatformResource",i).callGet().then(e=>e.resource_response?r((0,l.OD)(e.resource_response.data)):void 0)},m=(e,t,r,n)=>(s,u)=>{if(t)return Promise.resolve();if(n&&(i=n),1===e.length){let t=e[0],i=u().experiences,n=i[t],a=n?.extraContext||null;if(JSON.stringify(a)===JSON.stringify(r)||(0,o.E3)(n)&&!(r&&Object.keys(r).length>0))return Promise.resolve()}return a.Z.create("UserExperienceResource",{placement_ids:e,extra_context:r||null,targeting:n}).callGet().then(e=>e.resource_response?s((0,l.cL)(e.resource_response.data)):void 0)},h=(e,t,r,n)=>(s,o,u,c=!1,d,m)=>(h,f)=>{let{experiences:b,experiencesMulti:y}=f(),g=null,_=!0;if(c||(g=(_=b[s]&&b[s].experience_id===o)?b[s]:Array.isArray(y[s])&&y[s]?.find(e=>e.experience_id===o)),g&&g.experience_id===o||c&&s&&o){let c=a.Z.create(e,{placed_experience_id:`${s}%3A${o}`,extra_context:d??{},targeting:m}),f=_?l.Yb:l.xW;switch(t){case"dismissed":return c.callDelete().then(()=>{h(f(s,o,t)),h(p(void 0,i)),r&&n&&r({event_type:n,object_id_str:o.toString()})});case"completed":return c.callUpdate().then(()=>{!u&&(h(f(s,o,t)),h(p(void 0,i)),r&&n&&r({event_type:n,object_id_str:o.toString()}))});case"viewed":return h(f(s,o,t)),c.callUpdate().then(()=>{1000162===s&&h(p()),r&&n&&r({event_type:n,object_id_str:o.toString()})});case"completedWithoutHomefeed":return c.callUpdate().then(()=>{u||h(f(s,o,t)),r&&n&&r({event_type:n,object_id_str:o.toString()})})}}return Promise.resolve()},f=()=>{let e=(0,s.Z)(),t=(0,n.useCallback)(h("UserExperienceViewedResource","viewed",e,4503),[e]);return t},b=()=>{let e=(0,s.Z)(),t=(0,n.useCallback)(h("UserExperienceCompletedResource","completed",e,6567),[e]);return t},y=()=>{let e=(0,s.Z)(),t=(0,n.useCallback)(h("UserExperienceResource","dismissed",e,6568),[e]);return t},g=()=>{let e=(0,s.Z)(),t=(0,n.useCallback)(h("UserExperienceCompletedResource","completedWithoutHomefeed",e,6567),[e]);return t},_=(e,t)=>(r,i)=>{let{experiences:n}=i(),a=n[e];a&&a.triggerable_placed_exps&&a.triggerable_placed_exps.length&&a.triggerable_placed_exps.forEach(r=>{let[,i]=r.split(":"),n=t;a.metadata&&a.metadata[i]&&(n={...t,...a.metadata[i]}),(0,u.Z)({url:`/v3/experiences/${r.replace(":","%3A")}/trigger/`,method:"PUT",data:n?{extra_context:JSON.stringify(n,null,1)}:{}}).then(()=>{d("experienceservice","experimentTriggerCall.1",{placement_id:e,experience_id:i})})})},v=e=>(t,r)=>{t(_(e));let{experiences:i}=r();return i[e]},x=(e,t,r)=>n=>{r&&(i=r),n(_(e,t)),t&&Object.keys(t).length>0&&n(m([e],!1,t,r))}},703404:(e,t,r)=>{r.d(t,{A0:()=>l,E3:()=>s,MQ:()=>o,fL:()=>u});var i=r(883119),n=r(862249),a=r(785893);function s(e){return!!e&&0!==e.type}let o=(e,t,r)=>{let i=e[r];return t[r]&&s(i)?i:null};function l(e){return e.display_data?.anchor}let u=e=>{let t=new DOMParser,r=t.parseFromString(e,"text/html"),s=[...r.body?.childNodes||[]].map(e=>{if("A"!==e.nodeName)return(0,a.jsx)(i.xv,{inline:!0,children:e.textContent});{let t=e.href||"",r=(0,n.Z)({url:t});return(0,a.jsx)(i.rU,{display:"inline",externalLinkIcon:r?"default":"none",href:t,rel:r?"nofollow":"none",target:"blank",children:e.textContent})}});return(0,a.jsx)(i.xv,{inline:!0,children:s})}},957753:(e,t,r)=>{r.d(t,{NW:()=>o,OD:()=>u,Yb:()=>l,cL:()=>c,xW:()=>s});var i=r(216167),n=r(26616);let a=e=>({type:n.$S,payload:{experiencesMulti:e}}),s=(e,t,r)=>({type:n.V$,payload:{placementId:e,experienceId:t,status:r}}),o=e=>t=>i.Z.create("UserExperiencePlatformResource",{extra_context:e,multiExperiencePlatform:!0}).callGet().then(e=>e.resource_response?t(a(e.resource_response.data)):void 0),l=(e,t,r)=>({type:n.iY,payload:{placementId:e,experienceId:t,status:r}}),u=e=>({type:n._4,payload:{experiences:e}}),c=e=>({type:n.mR,payload:{experiences:e}})},775089:(e,t,r)=>{r.r(t),r.d(t,{default:()=>C});var i=r(667294),n=r(883119),a=r(214877),s=r(103322);function o(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let l={};function u(e){let t=l[e];return t&&t.screenWidth===window.innerWidth||(l[e]={screenWidth:window.innerWidth}),l[e]}let c=e=>{let t=e.__id||e.id;return"string"==typeof t&&t||null};class d{constructor(){o(this,"idMap",new Map),o(this,"objMap",new WeakMap)}get(e){let t=c(e);return this.objMap.get(e)??(t?this.idMap.get(t):void 0)}has(e){let t=c(e);return this.objMap.has(e)??(!!t&&this.idMap.has(t))}set(e,t){let r=c(e);r&&this.idMap.set(r,t),this.objMap.set(e,t)}reset(){this.idMap=new Map,this.objMap=new WeakMap}}var p=r(547643),m=r(213377),h=r(406893),f=r(340523),b=r(5859),y=r(554786),g=r(953565),_=r(84768),v=r(785893);function x({analyticsData:e,children:t,idx:r,isMeasuring:n,masonryV2ExpName:a,masonryV2ExpGroup:o}){let l=(0,y.ZP)(),{isAuthenticated:u}=(0,b.B)(),c=(0,_.MM)();return(0,i.useEffect)(()=>{let t=e.current[r];if(t){let{fetchTimestamp:t,measureTimestamp:i,hasRendered:s,pageCount:d}=e.current[r]??{},p={deviceType:l,experimentName:a,experimentGroup:o,handlerId:c,isAuthenticated:u,pageCount:d};n&&!i&&(e.current[r].measureTimestamp=Date.now(),(0,g.LY)("webapp.masonry.itemMeasureStart",Date.now()-t,{tags:p})),n||s||((0,g.LY)("webapp.masonry.itemRenderStart",Date.now()-i,{tags:p}),e.current[r].hasRendered=!0)}},[n]),(0,v.jsx)(s.Z,{name:"MasonryItem",children:t})}function C(e){let{align:t,cacheKey:r,id:o,isGridCentered:l=!0,items:c,layout:C,loadItems:w,masonryRef:E,renderItem:S,scrollContainerRef:P,virtualize:I=!0,_getColumnSpanConfig:A}=e,R=(0,y.ZP)(),{isAuthenticated:j,isRTL:O}=(0,b.B)(),{logContextEvent:T}=(0,a.v)(),M=(0,f.F)(),L="desktop"===R,Z=(0,_.MM)(),D=(0,i.useRef)(c.map(()=>({fetchTimestamp:Date.now(),measureTimestamp:Date.now(),hasRendered:!1,pageCount:0}))),$=e.columnWidth??m.yF,N=e.gutterWidth??(L?m.oX:1),k=e.minCols??m.yc,U=e.serverRender??!!L,V="flexible"===C||"desktop"!==R,F=U?"serverRenderedFlexible":"flexible",G=(0,i.useRef)(0),W=$+N,B=function(e){if(null==e)return;let t=u(e);return t.positionCache||(t.positionCache=new d),t.positionCache}(r),H=function(e){if(null==e)return;let t=u(e);return t.measurementCache||(t.measurementCache=new d),t.measurementCache}(r),Y=(0,i.useCallback)(()=>P?.current||window,[P]),X=(0,i.useRef)(!0),{anyEnabled:z}=M.checkExperiment("web_masonry_ssr_container_query"),J=l&&X.current?"gridCentered":"",{className:K,styles:q}=function(e){let t=`m_${Object.keys(e).reduce((t,r)=>{let i=e[r];return null==i||"object"==typeof i||"function"==typeof i?t:"boolean"==typeof i?t+(i?"t":"f"):t+i},"").replace(/\:/g,"\\:")}`,{flexible:r,gutterWidth:i,isRTL:n,itemWidth:a,maxColumns:s,minColumns:o,items:l,_getColumnSpanConfig:u}=e,c=u?l.map((e,t)=>({index:t,columnSpanConfig:u(e)??1})).filter(e=>1!==e.columnSpanConfig):[],d=a+i,p=Array.from({length:s+1-o},(e,t)=>t+o),m=p.map(e=>{let l=e===o?0:e*d,u=e===s?null:(e+1)*d-1,{styles:p,numberOfVisibleItems:m}=c.reduce((n,s)=>{let{columnSpanConfig:o}=s,l=function({columnCount:e,columnSpanConfig:t}){return"number"==typeof t?t:t[e<=2?"sm":e<=4?"md":e<=8?"lg":"xl"]??1}({columnCount:e,columnSpanConfig:o}),u=Math.min(l,e),c=null!=s.index&&n.numberOfVisibleItems>=u+s.index,d=r?100/e*u:a*u+i*(u-1),{numberOfVisibleItems:p}=n;return c?p-=u-1:s.index<p&&(p+=1),{styles:n.styles.concat(function({className:e,index:t,columnSpanConfig:r,visible:i,width:n,flexible:a}){let s="number"==typeof r?r:btoa(JSON.stringify(r));return a?`
      .${e} .static[data-column-span="${s}"]:nth-child(${t+1}) {
        visibility: ${i?"visible":"hidden"} !important;
        position: ${i?"inherit":"absolute"} !important;
        width: ${n}% !important;
      }`:`
      .${e} .static[data-column-span="${s}"]:nth-child(${t+1}) {
        visibility: ${i?"visible":"hidden"} !important;
        position: ${i?"inherit":"absolute"} !important;
        width: ${n}px !important;
      }`}({className:t,index:s.index,columnSpanConfig:o,visible:c,width:d,flexible:r})),numberOfVisibleItems:p}},{styles:"",numberOfVisibleItems:e}),h=r?`
      .${t} .static {
        box-sizing: border-box;
        width: calc(100% / ${e}) !important;
      }
    `:`
      .${t} {
        max-width: ${e*d}px;
      }

      .${t} .static {
        width: ${a}px !important;
      }
    `,f=`
      .${t} .static:nth-child(-n+${m}) {
        position: static !important;
        visibility: visible !important;
        float: ${n?"right":"left"};
        display: block;
      }

      .${t} .static {
        padding: 0 ${i/2}px;
      }

      ${h}

      ${p}
    `;return{minWidth:l,maxWidth:u,styles:f}}),h=m.map(({minWidth:e,maxWidth:t,styles:r})=>`
    @container (min-width: ${e}px) ${t?`and (max-width: ${t}px)`:""} {
      ${r}
    }
  `),f=m.map(({minWidth:e,maxWidth:t,styles:r})=>`
    @media (min-width: ${e}px) ${t?`and (max-width: ${t}px)`:""} {
      ${r}
    }
  `),b=e.enableContainerQuery?`
    ${h.join("")}
    @supports not (container-type: inline-size) {
      ${f.join("")}
    }
  `:f.join("");return{className:t,styles:`
    .masonryContainer {
      container-type: inline-size;
    }

    .gridCentered {
      margin-left: auto;
      margin-right: auto;
    }

    .${t} .static {
      position: absolute !important;
      visibility: hidden !important;
    }

    ${b}
  `}}({gutterWidth:N,flexible:V,items:c,isRTL:O,itemWidth:$,maxColumns:e.maxColumns??(c.length||m.g5),minColumns:k,enableContainerQuery:z,_getColumnSpanConfig:A}),Q=`${J} ${K}`.trim(),{anyEnabled:ee,expName:et,group:er,isMeasureAllEnabled:ei}=(0,p.Z)(),en=(0,i.useMemo)(()=>!H||c.every(e=>!H.has(e)),[]),ea=er&&en,es=(0,i.useRef)(),eo=(0,i.useRef)(c.length),el=(0,i.useRef)(0);(0,i.useEffect)(()=>{ea&&c.forEach((e,t)=>{D.current[t]||(D.current[t]={fetchTimestamp:Date.now(),measureTimestamp:0,hasRendered:!1,pageCount:el.current})}),eo.current=c.length,el.current+=1},[c]),(0,i.useEffect)(()=>{X.current&&(X.current=!1)},[]),(0,i.useEffect)(()=>{let e=()=>G.current+=1;return ea&&(es.current=Date.now(),window.addEventListener("scroll",e)),()=>{if(ea){let t=D.current;window.removeEventListener("scroll",e);let r=t.filter(e=>!!e.measureTimestamp).length,i=t.filter(e=>e.hasRendered).length,n=eo.current,a={deviceType:R,experimentName:et,experimentGroup:er,handlerId:Z,isAuthenticated:j};(0,g.LY)("webapp.masonry.timeSpent",es.current?Date.now()-es.current:0,{tags:a}),(0,g.S0)("webapp.masonry.itemsFetched",n,{tags:a}),(0,g.S0)("webapp.masonry.itemsMeasured",r,{tags:a}),(0,g.S0)("webapp.masonry.itemsMeasuredPercentage",Math.floor(r/n*100),{tags:a}),(0,g.S0)("webapp.masonry.itemsRendered",i,{tags:a}),(0,g.S0)("webapp.masonry.itemsRenderedPercentage",Math.floor(i/n*100),{tags:a}),(0,g.S0)("webapp.masonry.scrollCount",G.current,{tags:a})}}},[]);let eu=(0,i.useCallback)(e=>ea?(0,v.jsx)(x,{analyticsData:D,idx:e.itemIdx,isMeasuring:e.isMeasuring,masonryV2ExpGroup:er,masonryV2ExpName:et,children:(0,v.jsx)(s.Z,{name:"MasonryItem",children:S(e)})}):(0,v.jsx)(s.Z,{name:"MasonryItem",children:S(e)}),[S]);return(0,v.jsx)("div",{className:"masonryContainer","data-test-id":"masonry-container",id:o,children:(0,v.jsxs)("div",{className:Q,children:[U&&X.current?(0,v.jsx)(h.Z,{"data-test-id":"masonry-ssr-styles",unsafeCSS:q}):null,(0,v.jsx)(n.xu,{"data-test-id":"max-width-container",marginBottom:0,marginEnd:"auto",marginStart:"auto",marginTop:0,maxWidth:e.maxColumns?W*e.maxColumns:void 0,children:ee?(0,v.jsx)(n.GX,{ref:e=>{E&&(E.current=e)},_getColumnSpanConfig:A,_logTwoColWhitespace:e=>{(0,g.S0)("webapp.masonry.twoColWhitespace",e,{sampleRate:1,tags:{columnWidth:$,minCols:k}}),T({event_type:14705,component:14468,aux_data:{whitespace_px:e}})},_measureAll:ei,align:t,columnWidth:$,gutterWidth:N,items:c,layout:V?F:C??"basic",loadItems:w,measurementStore:H,minCols:k,positionStore:B,renderItem:eu,scrollContainer:Y,virtualBufferFactor:.3,virtualize:I}):(0,v.jsx)(n.Rk,{ref:e=>{E&&(E.current=e)},_getColumnSpanConfig:A,_logTwoColWhitespace:e=>{(0,g.S0)("webapp.masonry.twoColWhitespace",e,{sampleRate:1,tags:{columnWidth:$,minCols:k}}),T({event_type:14705,component:14468,aux_data:{whitespace_px:e}})},align:t,columnWidth:$,gutterWidth:N,items:c,layout:V?F:C??"basic",loadItems:w,measurementStore:H,minCols:k,positionStore:B,renderItem:eu,scrollContainer:Y,virtualBufferFactor:.3,virtualize:I})})]})})}},339001:(e,t,r)=>{r.d(t,{Wc:()=>l,bF:()=>c,nk:()=>o,r7:()=>d});var i=r(667294),n=r(785893);function a(e,t,r){return e.split(r).map(e=>{if(e.match(r)){let r=e.replace(/[\{\}]/g,"").trim();if(Object.prototype.hasOwnProperty.call(t,r))return t[r]}return e})}let s=/(\{\{\s*\w+\s*\}\})/g;function o(e,t){return a(e,t,s)}function l(e,t){return a(e,t,s).join("")}let u=/(\{\s*\w+\s*\})/g;function c(e,t){return a(e,t,u)}let d=({text:e})=>Array.isArray(e)?e.map((e,t)=>(0,n.jsx)(i.Fragment,{children:e},t)):e},67288:(e,t,r)=>{r.d(t,{P:()=>a,Z:()=>n});var i=r(702664);function n(e){return e&&e[1000069]&&500417===e[1000069].experience_id&&e[1000069].display_data.hide_footer}function a(){let e=(0,i.useSelector)(({experiences:e})=>e);return!!e&&n(e)}},493538:(e,t,r)=>{r.d(t,{Z:()=>l});var i=r(760890),n=r(667294),a=r(107860),s=r(906623),o=r(297315);function l({children:e,isAtEndOfFeed:t,pinData:r,itemCount:l,includeBackgroundImages:u=!1,includeVideos:c=!1,includeSections:d=!1}){return o.N5()?.isAuthenticated,(0,i.Z)({pinData:r,isAtEndOfFeed:t,includeBackgroundImages:u,includeVideos:c,includeSections:!0}),!function(e){let t=(0,s.E)(),r=(0,n.useRef)(null);(0,n.useEffect)(()=>{e!==r.current&&(r.current=e,t&&(0,a.ZP)(a.at))},[!!t,e])}(l),e}},984571:(e,t,r)=>{r.d(t,{Z:()=>s});var i=r(958881);let n=/\{\s*(\w+)\s*\}/g,a=(e,t)=>(0,i.Z)(n,e,t);function s({args:e,format:t}){let r=(e||[]).reduce((e,t,r)=>({...e,[r]:t.text}),{});return a(t,r)}},325362:(e,t,r)=>{r.d(t,{Z:()=>i});function i(e){return e.replace(/[_.-](\w|$)/g,(e,t)=>t.toUpperCase())}},627408:(e,t,r)=>{r.d(t,{Z:()=>g});var i=r(667294),n=r(541841),a=r(901855),s=r(5859),o=r(520893),l=r(503325),u=r(342513);let{Provider:c,useMaybeHook:d}=(0,u.Z)("timeSpentContext");var p=r(822987),m=r(19447),h=r(785893);function f(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class b extends i.Component{constructor(e){super(e),f(this,"componentWillUnmount",()=>{this.unregisterComponent()}),f(this,"getContext",()=>{let{clientTrackingParams:e,component:t,element:r,objectId:i,timeSpentContext:n,view:a,viewParameter:s}=this.props;return{view:a||n?.view,viewParameter:s||n?.viewParameter,component:t||n?.component,element:r,objectId:i||n?.objectId,clientTrackingParams:e||n?.clientTrackingParams,getParentUuid:()=>this.getUuid(),getGrandparentUuid:()=>this.getParentId()}}),f(this,"getLoggerContext",()=>{let e={...this.getContext()};return delete e.getParentUuid,e}),f(this,"getParentId",()=>{let{timeSpentContext:e,shouldUseGrandparentId:t=!1}=this.props;if(t&&e&&e.getGrandparentUuid){let t=e.getGrandparentUuid();if(t)return t}return e&&e.getParentUuid?e.getParentUuid():void 0}),f(this,"getUuid",()=>this.state.timedPair?this.state.timedPair.uuid:void 0),f(this,"getTimedPair",()=>this.state.timedPair),f(this,"setTimedPair",(e,t)=>{this.setState({timedPair:e},()=>{t&&t()})}),f(this,"isRegistered",!1),f(this,"registerComponent",()=>{this.props.timeSpentManager.registerComponent(this),this.isRegistered=!0}),f(this,"unregisterComponent",()=>{this.isRegistered&&(this.props.timeSpentManager.unregisterComponent(this),this.isRegistered=!1)}),f(this,"handleVisibilityChange",e=>{let{intersectionRatio:t}=e[0],{bottom:r,left:i,right:n,top:a}=e[0].intersectionRect;t>0?this.registerComponent():0===t&&(0===r&&0===i&&0===n&&0===a?this.unregisterComponent():this.registerComponent())}),this.state={timedPair:new l.Z(this.getLoggerContext())}}componentDidUpdate(e){!this.isRegistered||e.view===this.props.view&&e.viewParameter===this.props.viewParameter&&e.component===this.props.component&&e.element===this.props.element&&e.objectId===this.props.objectId&&(0,o.Z)(e.auxData,this.props.auxData)&&(0,o.Z)(e.viewData,this.props.viewData)||(this.unregisterComponent(),setTimeout(this.registerComponent))}render(){let{children:e}=this.props;return(0,h.jsx)(c,{value:this.getContext(),children:(0,h.jsx)(n.Z,{onVisibilityChange:this.handleVisibilityChange,options:{threshold:0},children:i.Children.only(e)})})}}function y(e){let t=(0,a.Hv)(),r=d(),n=(0,p.w)(),o=(0,m.H0)(),{requestIdentifier:l=""}=(0,s.B)(),u={app_instance_id:l.slice(0,8),...e.auxData??{}};return(0,i.useEffect)(()=>{n?.setHistoryStackContext(t)},[t,n]),(0,i.useEffect)(()=>{n?.setPins(o??{})},[o,n]),n?(0,h.jsx)(b,{...e,auxData:u,timeSpentContext:r,timeSpentManager:n,children:e.children}):e.children}y.displayName="TimeSpent";let g=y},862249:(e,t,r)=>{r.d(t,{Z:()=>n});var i=r(968946);let n=({url:e})=>!!(e&&e.match(/^https{0,1}:\/\//)&&!(0,i.Z)(e))},830889:(e,t,r)=>{r.d(t,{Z:()=>s});var i=r(702664);let n=[1000069,1000075],a={};function s(){var e;return e=(0,i.useSelector)(({experiences:e})=>e),n.forEach(t=>{e[t]&&(void 0===a[t]||a[t].id!==e[t].id)&&(a[t]=e[t])}),a}},446653:(e,t,r)=>{r.d(t,{r:()=>v,K:()=>_});var i=r(667294),n=r(342513),a=r(340523),s=r(757640),o=r(149722),l=r(998577),u=r(573810),c=r(325362);let d=e=>{let t={};for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&("object"!=typeof e[r]||null===e[r]||Array.isArray(e[r])?t[(0,c.Z)(r)]=e[r]:t[(0,c.Z)(r)]=d(e[r]));return t},p=(e,t)=>{let r=[];for(let i in e)i!==t&&r.push({id:i,...d(e[i])});let i=r.sort(({user:{businessName:e}},{user:{businessName:t}})=>e.localeCompare(t)),n=new Map;for(let e of i)n.set(e.id,e);return n},m={profiles:new Map,headerVisible:!1,orbacVisibility:!1,activeProfile:void 0,disableProfileChanger:!1},h=(e,t)=>{switch(t.type){case"LOAD_PROFILES":return{...e,profiles:t.payload};case"SET_ACTIVE_PROFILE":return{...e,activeProfile:t.payload};case"TOGGLE_HEADER_VISIBILITY":return{...e,headerVisible:t.payload};case"TOGGLE_ORBAC_VISIBILITY":return{...e,orbacVisibility:t.payload};case"TOGGLE_DISABLE_PROFILE_CHANGER":return{...e,disableProfileChanger:t.payload};default:return e}},f=({dispatch:e,isEnabled:t,state:r})=>{let{orbacVisibility:n,disableProfileChanger:a,headerVisible:s}=r,o=(0,i.useCallback)(r=>{t&&e({type:"SET_ACTIVE_PROFILE",payload:r})},[t,e]),l=(0,i.useCallback)(r=>{t&&e({type:"TOGGLE_ORBAC_VISIBILITY",payload:r??!n})},[t,e,n]),u=(0,i.useCallback)(r=>{t&&e({type:"TOGGLE_DISABLE_PROFILE_CHANGER",payload:r??!a})},[t,e,a]),c=(0,i.useCallback)(r=>{t&&e({type:"TOGGLE_HEADER_VISIBILITY",payload:r??!s})},[t,e,s]);return{changeProfile:o,toggleORBACVisibility:l,toggleDisableProfileChanger:u,toggleHeaderVisibility:c}},b=e=>{let[t,r]=(0,i.useReducer)(h,m),n=f({dispatch:r,isEnabled:e,state:t}),{activeProfile:a,orbacVisibility:s}=t;(0,i.useEffect)(()=>{let e=(0,u.qn)("orbacActiveProfile",!1);e&&r({type:"SET_ACTIVE_PROFILE",payload:e})},[]),(0,i.useEffect)(()=>{let e=(0,u.qn)("orbacVisibilty",!1);e&&r({type:"TOGGLE_ORBAC_VISIBILITY",payload:e})},[]),(0,i.useEffect)(()=>{(0,u.Nh)("orbacVisibility",s)},[s]),(0,i.useEffect)(()=>{(0,u.Nh)("orbacActiveProfile",a)},[a]);let o=(0,i.useCallback)((e,t)=>{r({type:"LOAD_PROFILES",payload:p(e,t)})},[r]);return{state:t,actions:n,receiveProfiles:o}};var y=r(785893);let{Provider:g,useMaybeHook:_}=(0,n.Z)("RoleBasedAccessControlContext"),v=({children:e})=>{let t;let{checkExperiment:r}=(0,a.F)(),n=(0,o.Z)(),u=!!(n.isAuth&&n.isPartner&&r("web_m10n_business_access_orbac_www").anyEnabled),{state:c,actions:d,receiveProfiles:p}=b(u),{activeProfile:m,headerVisible:h,profiles:f=[]}=c,_=f?Array.from(f.values()):[],v=(0,l.Z)(_),x=!!n.isAuth&&_.length>0&&v,C=n.isAuth?n.id:"",w=n.isAuth?n.username:"",{changeProfile:E,toggleORBACVisibility:S,toggleDisableProfileChanger:P,toggleHeaderVisibility:I}=d;(0,i.useEffect)(()=>{if(u){if("string"==typeof v){E(v);return}m||E(C)}},[v,C,u,E,m]),(0,i.useEffect)(()=>{u&&(x&&!h&&I(!0),!x&&h&&I(!1))},[I,x,u,h,f]);let{data:A}=(0,s.Z)(u?{name:"ApiResource",options:{url:"/vx/business_access/profiles/",disable_auth_failure_redirect:!0}}:null),R=A?.profiles;n&&n.isAuth&&c.activeProfile===n.id?t={id:n.id,permissions:["OWNER"],user:{username:w,businessName:n.fullName,imgUrl:n.imageSmallUrl}}:m&&c.profiles&&(t=c.profiles.get(m)),(0,i.useEffect)(()=>{R&&p(R,C)},[p,R,C]);let j=c.profiles?Array.from(c.profiles.values()):[];return(0,y.jsx)(g,{value:{profiles:j,headerVisible:c.headerVisible,activeProfile:t,changeProfile:E,toggleORBACVisibility:S,toggleDisableProfileChanger:P,toggleHeaderVisibility:I},children:e})}},785059:(e,t,r)=>{r.d(t,{Z:()=>s});var i=r(340523),n=r(446653),a=r(998577);let s=()=>{let{checkExperiment:e}=(0,i.F)(),t=(0,n.K)(),{activeProfile:r}=t||{},s=e("web_m10n_business_access_orbac_www").anyEnabled,o=(0,a.Z)(t?.profiles||[]),{anyEnabled:l}=e("useorbacroutematcher_in_useorbacactingas");return s&&(!l||o)&&r&&(r.viewerMeetsMfaRequirement||(r.permissions||[]).includes("OWNER"))?r:Object.freeze({})}},998577:(e,t,r)=>{r.d(t,{Z:()=>l});var i=r(616550),n=r(96157),a=r(340523),s=r(149722),o=r(19447);let l=e=>{let t=(0,i.TH)(),r=(0,s.Z)(),l=(0,o.S6)(),{anyEnabled:u}=(0,a.F)().checkExperiment("web_m10n_business_access_orbac_www"),c=(0,i.$B)("/:username"),d=c?.params?.username,p=(0,i.$B)("/pin/:id"),m=!!p?.params?.id&&l(p.params.id)?.pinner?.id;if((0,n.ej)(t))return!1;if((0,n.RU)(t))return!0;if((0,n.mY)(t))return u;let h=e.concat(r.isAuth?{user:{username:r.username},id:r.id}:{}).find(e=>{let{user:t={},id:r}=e||{},{username:i}=t;return(!!i&&!!d||!!m&&!!r)&&(i===d||m===r)});return!!h&&h.id}},199677:(e,t,r)=>{r.d(t,{D3:()=>u,DX:()=>o,KY:()=>c,Ms:()=>i,N1:()=>d,_P:()=>s,lJ:()=>a,nl:()=>n,q6:()=>l});let i=(e,t)=>{let r=e&&e.isAuth?e.username:"";return e&&t&&t.user&&t.user.username&&(r=t.user.username),r},n=(e,t)=>!!(t&&t.user&&e&&e.isAuth&&t.id!==e.id?t.user.eligibleForStlTool:e&&e.isAuth&&e.eligibleForStlTool),a=(e,t)=>e&&e.isAuth&&t&&t.id&&t.id!==e.id?t.id:"",s=(e,t,r)=>r&&r.user&&t&&t.isAuth&&r.id!==t.id?r.user.merchantId:e.advertiser?.merchant_id,o=(e,t,r)=>r&&r.user&&e.isAuth&&r.id!==e.id?r.user.scheduledPinCount||0:e.isAuth&&t&&t.scheduled_pin_count||0,l=(e,t,r)=>{let i=e&&e.isAuth&&r&&r.id&&r.id!==e.id&&r.id===t;return!!i},u=(e,t,r)=>{let i=l(e,t,r)||e&&e.isAuth&&t===e.id;return!!i},c=(e,t,r)=>{let i=t&&t.owner&&t.owner.id||"";return u(e,i,r)};function d(e,t,r){let i=t?t.id:"";return u(e,i,r)}},282008:(e,t,r)=>{r.d(t,{Z:()=>p});var i=r(883119),n=r(214877),a=r(213377),s=r(666472),o=r(984571),l=r(575742),u=r(818385),c=r(785893);let d=a.yF;function p({contextLogData:e,bubbles:t,id:r,referringSource:a,slotIndex:p,storyType:m,title:h,titleIcon:f,viewType:b,viewParameter:y}){let{logContextEvent:g}=(0,n.v)(),_=t.map(({type:e,id:t})=>e+":"+t).join("|"),v={story_type:m,...e,content_ids:_};return(0,c.jsx)(s.F,{componentType:200,contextLogData:v,impressionType:"Story",loggingId:r,objectIdStr:r,slotIndex:p,viewParameter:y,viewType:b,children:({impressionTrackerRef:e})=>(0,c.jsxs)(i.xu,{ref:e,children:[h&&(0,c.jsxs)(i.xu,{alignItems:"center",display:"flex",justifyContent:"center",marginBottom:1,children:["number"==typeof f&&f!==l.J&&(0,c.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{paddingTop:1}},marginEnd:2,children:(0,c.jsx)(i.JO,{accessibilityLabel:"",color:"default",icon:(0,l.Z)(f),size:14})}),(0,c.jsx)(i.xv,{weight:"bold",children:(0,o.Z)(h)})]}),t.map((e,t)=>(0,c.jsx)(i.xu,{flex:"none",paddingY:1,children:(0,c.jsx)(u.Z,{bubble:e,contextLogData:v,height:103,onClick:e=>{g({event_type:101,object_id_str:e,view_type:b,view_parameter:y,component:200,aux_data:v})},referringSource:a,slotIndex:t,storyId:r,viewParameter:y,viewType:b,width:d})},`bubble-${e.id}`))]})})}},166770:(e,t,r)=>{r.d(t,{H:()=>a,o:()=>n});var i=r(342513);let{Provider:n,useHook:a}=(0,i.Z)("LimitedLogin")}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/26988-f88ef9229575b539.mjs.map